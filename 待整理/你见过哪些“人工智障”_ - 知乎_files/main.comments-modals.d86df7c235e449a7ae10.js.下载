(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1001:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var o=n(23),a=n.n(o),c=n(28),r=n.n(c),i=n(27),s=n.n(i),l=n(29),m=n.n(l),u=n(19),d=n.n(u),p=n(0),h=n.n(p),f=n(13),b=n.n(f),v=n(119),C=n.n(v),O=n(7);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d()(e);if(t){var a=d()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return m()(this,n)}}var j=function(e){s()(n,e);var t=g(n);function n(){var e;a()(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={uid:C()()},e.handleChange=function(t){var n=t.target.files;n&&e.uploadFiles(n),e.setState({uid:C()()})},e.uploadFiles=function(t){var n=e.props.multiple,o=C()(),a=Array.prototype.slice.call(t);n?a.map((function(t){e.upload(t,o)})):e.upload(a[0],o)},e.upload=function(t,n){var o,a=e.props,c=a.beforeUpload,r=a.customUpload,i=a.onStart,s=a.onSuccess,l=a.onError;if(c&&(o=c(t)),!1!==o&&r){var m={file:t,uid:n,status:"uploading"};i&&i(m),Promise.resolve().then((function(){return r({file:t})})).then((function(e){s&&s(Object.assign(Object.assign({},m),{},{remoteInfo:e,status:"success"}))})).catch((function(e){l&&l(Object.assign(Object.assign({},m),{},{remoteInfo:e,status:"error"}))}))}},e}return r()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.accept,o=e.multiple,a=e.disabled,c=e.onRef,r=e.onClick,i=e.children;return Object(O.g)("label",{className:b()("UploadPicture-wrapper",t)},Object(O.g)("input",{type:"file",accept:n,multiple:o,className:"UploadPicture-input",disabled:a,ref:c,onChange:this.handleChange,onClick:r}),i)}}]),n}(h.a.Component);j.defaultProps={multiple:!1,disabled:!1}},1071:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var o=n(23),a=n.n(o),c=n(28),r=n.n(c),i=n(27),s=n.n(i),l=n(29),m=n.n(l),u=n(19),d=n.n(u),p=n(56),h=n.n(p),f=n(0),b=n(13),v=n.n(b),C=n(34),O=n(7);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d()(e);if(t){var a=d()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return m()(this,n)}}var j=function(e){s()(n,e);var t=g(n);function n(){var e;a()(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).handleClick=function(){var t=e.props;(0,t.onSelect)(t.page)},e}return r()(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isCurrent,o=e.className;return Object(O.g)(C.c,{preset:C.b.Plain,className:v()("PaginationButton",{"PaginationButton--current":n},o),onClick:this.handleClick,disabled:n},t)}}]),n}(f.Component);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d()(e);if(t){var a=d()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return m()(this,n)}}var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from({length:t},(function(t,n){return n+e}))},k=function(e){s()(n,e);var t=y(n);function n(){return a()(this,n),t.apply(this,arguments)}return r()(n,[{key:"render",value:function(){var e,t=this.props,n=t.onSelect,o=t.className,a=t.clickCallback,c=this.props.current,r=this.props.total,i=a&&(e=a,function(){e.apply(void 0,arguments)})||n,s=function(e,t){var n="...";return t<=5?R(1,t):e>t-3?[1,n].concat(h()(R(t-3,3)),[t]):e<=3?[1].concat(h()(R(2,3)),[n,t]):[1,n].concat(h()(R(e-Math.floor(1.5),3)),[n,t])}(c,r);return Object(O.g)("div",{className:v()("Pagination",o)},c>1&&c<=r&&Object(O.g)(j,{className:"PaginationButton-prev",onSelect:i,text:"上一页",page:c-1}),s.map((function(e,t){return"number"==typeof e?Object(O.g)(j,{onSelect:i,text:e,page:e,key:t,isCurrent:c===e}):Object(O.g)("button",{disabled:!0,key:t,className:"PaginationButton PaginationButton--ellipsis"},e)})),c>0&&c<r&&Object(O.g)(j,{className:"PaginationButton-next",onSelect:i,text:"下一页",page:c+1}))}}]),n}(f.Component);k.defaultProps={current:1,total:1,onSelect:function(){}}},1161:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),a=n.n(o),c=n(12),r=Object.assign;function i(e){return a.a.createElement(c.a,r(r({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"EyeFill24","data-old-api":"Eye"},e),{className:"Zi Zi--Eye"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M21.675 15.423c-1.392 2.207-4.33 5.294-9.674 5.294-5.34 0-8.28-3.083-9.674-5.29a5.882 5.882 0 01-.392-5.534c1.15-2.605 3.963-6.61 10.066-6.61 6.107 0 8.918 4.01 10.066 6.615a5.88 5.88 0 01-.392 5.525zM9.734 11.937a2.165 2.165 0 012.72-2.093.75.75 0 10.383-1.45 3.669 3.669 0 00-4.603 3.543 3.665 3.665 0 107.216-.908.75.75 0 00-1.453.37 2.168 2.168 0 01-2.098 2.703 2.165 2.165 0 01-2.165-2.165z",fillRule:"evenodd",clipRule:"evenodd"}))}},1169:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o,a=n(47),c=n(2),r=n(1),i=n(38),s=n(0),l=n(97),m=n(955),u=n(221),d=n(292),p={comment_img:"comment_img",dynamic_top:"dynamic_top",comment_sticker:"comment_sticker",block_keyword:"block_keyword"},h=(o={},Object(c.a)(o,p.comment_img,"https://pic1.zhimg.com/v2-1b6677f81c2df41f55332474e15bc5a8.png"),Object(c.a)(o,p.dynamic_top,"https://pic1.zhimg.com/v2-e16a265a43592abd5b98fceef02a1614.png"),Object(c.a)(o,p.comment_sticker,"https://pic1.zhimg.com/v2-183a98cd480d24cd3e3246ba7a26303b.png"),Object(c.a)(o,p.block_keyword,"https://pic3.zhimg.com/v2-0ad4e8aa43c3279cc7536f2fb7ac8348.png"),o);t.b=Object(u.a)((function(e){var t=e.show,n=e.setShow,o=e.type,c=e.isLogin,u=Object(s.useState)(""),p=Object(a.a)(u,2),f=p[0],b=p[1],v=Object(s.useState)(!1),C=Object(a.a)(v,2),O=C[0],g=C[1],j=Object(d.b)(),y=Object(i.d)((function(){t&&n(!1)}));return Object(s.useEffect)((function(){!f&&c&&(g(!0),j("/api/v4/unlimited/vip_rights/popup?token="+o).then((function(e){b(e.payload.button.text)})).catch((function(){})).then((function(){g(!1)})))}),[t]),Object(r.b)(l.b,{css:{".Modal-content":{padding:0,marginTop:0}},onClose:y,children:t&&!O&&Object(r.c)(r.a,{children:[Object(r.b)("img",{alt:"",src:h[o],css:{height:"230px",width:"400px",display:"block"}}),Object(r.b)("div",{css:{padding:20},children:Object(r.b)("div",{role:"button",tabIndex:0,css:function(e){return{padding:8,background:"linear-gradient(135deg, ".concat(e.colors.GYL06A," 0.2%, ").concat(e.colors.GYL08A," 100%)"),borderRadius:3,textAlign:"center",fontsize:14,color:e.colors.GYL12A,userSelect:"none","&:hover":{cursor:"pointer"}}},onClick:m.a.show,children:f||"开通会员立即解锁"})})]})})}))},1184:function(e,t,n){var o=n(663),a=n(226),c=n(384),r=Math.max,i=Math.min;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=s-1;return void 0!==n&&(l=c(n),l=n<0?r(s+l,0):i(l,s-1)),o(e,a(t,3),l,!0)}},1240:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var o=n(32),a=n(13),c=n.n(a),r=["className","label","tabIndex"];function i(e){return"Enter"===e.key||" "===e.key||"Enter"===e.code||"Space"===e.code||13===e.keyCode||32===e.keyCode}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.className,a=t.label,s=void 0===a?"":a,l=t.tabIndex,m=void 0===l?0:l,u=Object(o.default)(t,r);return Object.assign(Object.assign({role:"button",tabIndex:m,onClick:e,onKeyDown:function(t){i(t)&&e(t)},className:c()("a11y-button",n)},s&&{"aria-label":s}),u)}},1253:function(e,t,n){"use strict";var o=n(47),a=n(1),c=n(0),r=n(83),i=n.n(r),s=n(21),l=n(483),m=Object(s.connect)((function(e){return{hasData:e.emoticons.emoticonGroupList.length>0}}));t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alwaysShow,n=void 0!==t&&t;return function(e){return m(i()((function(t){var r=t.hasData,i=Object(c.useState)(!1),m=Object(o.a)(i,2),u=m[0],d=m[1],p=Object(s.useDispatch)();return Object(c.useEffect)((function(){r?d(!0):p(Object(l.d)()).then((function(e){var t=e.payload.data[0].id;p(Object(l.e)(t)),d(!0)})).catch((function(){d(!0)}))}),[p,r]),(!u||!n)&&Object(a.b)(e,Object.assign({},t))}),e))}}},1319:function(e,t,n){"use strict";var o=n(172),a=n(4),c=n(14),r=n(15),i=n(82),s=n(17),l=n(18),m=n(8),u=n(1),d=n(0),p=n.n(d),h=n(20),f=n(3),b=n.n(f),v=n(50),C=n(49),O=n(21),g=n(13),j=n.n(g),y=n(26),R=n(70),k=n(223),N=n.n(k),w=n(41),I=n.n(w),S=n(34),E=n(449),P=n(221),z=n(258),B=n(1253),A=n(477),T=n(32),L=n(47),x=n(60),M=n.n(x),D=n(173),F=n(302),V=n(1001),_=n(433),H=n(1908),q=n(38),U=n(1169),G=n(44),W=n(295),Z=n(31),Y=n(30),K="zhihu::comment_local_key",J=(Y.T,function(){return""}),X="上传失败",Q="上传中",$="",ee="emoticon",te="selected",ne="image",oe=Object(d.forwardRef)((function(e,t){var n=e.children,o=Object(d.useRef)(!1),a=Object(d.useRef)(null),c=Object(d.useRef)(null),r=Object(d.useRef)(null),i=Object(q.d)((function(){var e,t,n;null===(e=a.current)||void 0===e||e.position(),null===(t=c.current)||void 0===t||t.position(),null===(n=r.current)||void 0===n||n.position()})),s=Object(q.d)((function(){var e;null===(e=a.current)||void 0===e||e.open()})),l=Object(q.d)((function(){var e,t,n;null===(e=r.current)||void 0===e||e.open(),null===(t=c.current)||void 0===t||t.close(),null===(n=a.current)||void 0===n||n.close()})),m=Object(q.d)((function(){var e;null===(e=r.current)||void 0===e||e.close()})),u=Object(q.d)((function(){var e,t,n;null===(e=c.current)||void 0===e||e.open(),null===(t=r.current)||void 0===t||t.close(),null===(n=a.current)||void 0===n||n.close()})),p=Object(q.d)((function(){var e;null===(e=c.current)||void 0===e||e.close()})),h=Object(q.d)((function(){var e,t,n;null===(e=r.current)||void 0===e||e.close(),null===(t=c.current)||void 0===t||t.close(),null===(n=a.current)||void 0===n||n.close()})),f=Object(q.d)((function(){var e,t;o.current||(o.current=!0,null===(e=c.current)||void 0===e||e.open(),null===(t=r.current)||void 0===t||t.open(),Promise.resolve().then((function(){var e,t;null===(e=c.current)||void 0===e||e.close(),null===(t=r.current)||void 0===t||t.close()})))})),b=Object(d.useState)({register:function(e,t){e===ee&&(a.current=t),e===te&&(c.current=t),e===ne&&(r.current=t)},position:i,openEmoticon:s,openImage:l,openSelected:u,closeImage:m,closeSelected:p,closeAll:h,prepare:f}),v=Object(L.a)(b,1)[0];return Object(d.useImperativeHandle)(t,(function(){return v})),n&&n.map((function(e){return Object(d.cloneElement)(e,{popoversController:v})}))})),ae=n(52),ce=Object.assign;var re=function(e){return p.a.createElement(ae.a,ce({width:"21",height:"14",fill:"none"},e),p.a.createElement("path",{fill:"url(#A)",stroke:"#f6f6f6",d:"M7.486.504a6 6 0 100 12h7a6 6 0 100-12h-7z"}),p.a.createElement("g",{fill:"#935d14"},p.a.createElement("path",{d:"M8.459 9.431l2.465-5.366h-.916L8.401 7.751l-1.6-3.687h-.923L8.35 9.431h.109zm3.825 0V4.065h-.814v5.366h.814zm2.05 0V7.445h.284c.659 0 1.156-.153 1.491-.46s.502-.747.502-1.321c0-.496-.154-.887-.462-1.172s-.794-.427-1.458-.427h-1.178v5.366h.822zm.305-2.708h-.305V4.78h.378c.388 0 .664.09.829.27s.247.414.247.701c0 .268-.085.496-.254.686s-.468.285-.894.285z",fillRule:"evenodd"}),p.a.createElement("path",{d:"M8.459 9.431v.146h.094l.039-.085-.133-.061zm2.465-5.366l.133.061.095-.207h-.228v.146zm-.916 0v-.146h-.096l-.038.088.134.058zM8.401 7.751l-.134.058.134.309.134-.309-.134-.058zm-1.6-3.687l.134-.058-.038-.088h-.096v.146zm-.923 0v-.146h-.229l.096.208.133-.061zM8.35 9.431l-.133.061.039.085h.094v-.146zm3.934 0v.146h.146v-.146h-.146zm0-5.366h.146v-.146h-.146v.146zm-.814 0v-.146h-.146v.146h.146zm0 5.366h-.146v.146h.146v-.146zm2.865 0v.146h.146v-.146h-.146zm0-1.986v-.146h-.146v.146h.146zm-.822-3.38v-.146h-.146v.146h.146zm0 5.366h-.146v.146h.146v-.146zm.822-2.708h-.146v.146h.146v-.146zm0-1.942v-.146h-.146v.146h.146zM8.592 9.492l2.465-5.366-.266-.122L8.326 9.37l.266.122zm2.332-5.573h-.916v.293h.916v-.293zm-1.05.088L8.267 7.693l.268.117 1.607-3.687-.268-.117zM8.535 7.693l-1.6-3.687-.269.116 1.6 3.687.268-.116zM6.801 3.918h-.923v.293h.923v-.293zm-1.056.208l2.472 5.366.266-.122-2.472-5.366-.266.122zM8.35 9.577h.109v-.293H8.35v.293zm4.08-.146V4.065h-.293v5.366h.293zm-.146-5.512h-.814v.293h.814v-.293zm-.961.146v5.366h.293V4.065h-.293zm.146 5.512h.814v-.293h-.814v.293zm3.011-.146V7.445h-.293v1.986h.293zm-.146-1.839h.284v-.293h-.284v.293zm.284 0c.68 0 1.218-.158 1.589-.498l-.198-.216c-.297.273-.753.421-1.392.421v.293zm1.589-.498c.372-.341.549-.826.549-1.429h-.293c0 .545-.158.942-.454 1.214l.198.216zm.549-1.429c0-.529-.166-.962-.509-1.279l-.199.215c.272.252.415.6.415 1.064h.293zm-.509-1.279c-.347-.321-.877-.466-1.557-.466v.293c.648 0 1.09.14 1.358.388l.199-.215zM14.69 3.92h-1.178v.293h1.178V3.92zm-1.324.146v5.366h.293V4.065h-.293zm.146 5.512h.822v-.293h-.822v.293zm1.127-3.001h-.305v.293h.305v-.293zm-.159.146V4.78h-.293v1.942h.293zm-.146-1.796h.378v-.293h-.378v.293zm.378 0c.37 0 .597.087.721.223l.216-.198c-.205-.224-.532-.318-.937-.318v.293zm.721.223c.136.148.209.345.209.602h.293c0-.317-.092-.588-.286-.8l-.216.198zm.209.602a.85.85 0 01-.217.589l.218.195a1.14 1.14 0 00.292-.784h-.293zm-.217.589c-.128.143-.373.236-.785.236v.293c.441 0 .792-.097 1.003-.334l-.218-.195z"})),p.a.createElement("defs",null,p.a.createElement("linearGradient",{id:"A",x1:"1.986",x2:"19.986",y1:"12.004",y2:"12.004",gradientUnits:"userSpaceOnUse"},p.a.createElement("stop",{stopColor:"#f8e2c4"}),p.a.createElement("stop",{offset:"1",stopColor:"#f3bb6c"}))))},ie=["showVipBadge"];function se(e){var t=e.images,n=e.onClick,o=e.onReset,a=Object(d.useState)(!1),c=Object(L.a)(a,2),r=c[0],i=c[1],s=Object(q.d)((function(){return i(!0)})),l=Object(q.d)((function(){return i(!1)}));return Object(u.c)(d.Fragment,{children:[Object(u.c)("div",{onMouseEnter:s,onMouseLeave:l,css:{width:"110px",height:"110px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(u.b)("img",{src:t[0].src,alt:""}),r&&Object(u.b)(le,{onClick:n})]}),Object(u.b)("div",{className:"closeButton",onClick:o,css:function(e){return{color:e.colors.GBK06A}},children:Object(u.b)(_.a,{})})]})}function le(e){var t=e.onClick;return Object(u.b)("div",{role:"button",tabIndex:0,css:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",borderRadius:"4px","&:hover":{cursor:"pointer"}},onClick:t,children:Object(u.b)("div",{css:function(e){return{color:e.colors.GBK99B,lineHeight:"27px",width:"74px",borderRadius:"20px",borderColor:"#fefefe",borderWidth:"1px",borderStyle:"solid",fontSize:"12px",textAlign:"center"}},children:"更换图片"})})}var me=Object(d.forwardRef)((function(e,t){var n=e.showVipBadge,o=Object(T.default)(e,ie);return Object(u.b)(R.a,Object.assign({as:F.a,zaType:"Button",zaEventType:"Click",zaBlock:"AppendImage",label:"插入图片",ref:t,icon:Object(u.c)(d.Fragment,{children:[Object(u.b)(H.a,{}),n&&Object(u.b)(re,{css:{position:"absolute",transform:"translate(10px, -6.5px)",width:"20px",height:"13px"}})]})},o))})),ue=Object(h.compose)(Object(O.connect)((function(e){return{isVip:Object(G.j)(e)}}),{showNotification:Z.h,uploadImage:W.b}),P.a)((function(e){var t=e.popoversController,n=Object(d.useState)($),o=Object(L.a)(n,2),a=o[0],c=o[1],r=Object(d.useState)(!1),i=Object(L.a)(r,2),s=i[0],l=i[1],m=Object(d.useRef)();Object(d.useEffect)((function(){t.register(ne,m.current)}),[t]);var p=Object(d.useRef)(),h=Object(q.d)((function(t){t.preventDefault(),(0,e.authRequired)((function(){var t,n=e.handleInputActive;e.hasPermission?(null===(t=p.current)||void 0===t||t.click(),n(!0)):l(!0)}))()})),f=function(){p.current&&(p.current.value=null)},b=function(){var t=e.handleImages,n=e.showNotification,o=e.resetUploadImg;t([]),n("图片上传失败","red"),o(),c(X)},v=function(t){var n=e.handleImages,o=e.updatePublishStatus;n([Object.assign(Object.assign({},t.payload),{},{url:t.payload.src})]),o(!1),f(),c($)},C=Object(q.d)((function(n){var o=e.showNotification;return n?n.size>1024*Y.T*1024?(o("请上传小于 ".concat(Y.T,"M 的图片。"),"red"),f(),!1):(t.openImage(),void c(Q)):(f(),!1)})),O=Object(q.d)((function(t){var n=t.file;return(0,e.uploadImage)(n).then(v).catch(b)})),g=Object(q.d)((function(){var n=e.resetUploadImg,o=void 0===n?M.a:n;t.closeImage(),o()})),j=e.images,y=e.disableButton,R=e.hasPermission,k=e.onPopoverOpen,N=e.isVip,w=Boolean(j.length)&&a===$,I=N||!R;return Object(u.c)(d.Fragment,{children:[Object(u.b)(D.a,{className:"ImagePopover",arrowed:!0,ref:m,placement:"bottom",globalClose:!j.length,onOpen:k,onClick:h,toggler:Object(u.b)(me,{disabled:y,showVipBadge:I}),children:Object(u.c)("div",{className:"ImagePopover-thumbnail",children:[w&&Object(u.b)(se,{images:j,onClick:h,onReset:g}),a&&!w&&Object(u.b)("p",{className:"ImagePopover-uplodaStatus",children:a})]})}),Object(u.b)(V.a,{accept:"image/png,image/jpeg",onRef:p,beforeUpload:C,customUpload:O}),Object(u.b)(U.b,{show:s,setShow:l,type:U.a.comment_img})]})})),de=n(89);function pe(e){var t=e.onClose,n=e.onSubmit;return Object(u.c)(de.b,{className:"CommentCheckModal-wrapper",onClose:t,children:[Object(u.b)("div",{className:"CommentCheckModal-image"}),Object(u.b)("div",{className:"CommentCheckModal-title",children:"评论可能包含不友善内容"}),Object(u.b)("div",{className:"CommentCheckModal-content",children:"友善的交流是沟通的起点，请遵守知乎社区规范，认真友善发言"}),Object(u.c)("div",{className:"CommentCheckModal-button",children:[Object(u.b)(S.c,{className:"CommentCheckModal-submit",onClick:n,preset:"primary",children:"继续发布"}),Object(u.b)(S.c,{className:"CommentCheckModal-modify",onClick:t,preset:"primary",color:"blue",children:"返回修改"})]})]})}var he=function(e){var t=e.url,n=e.title,o=e.onReset,a=void 0===o?M.a:o,c=e.popoversController,r=Object(d.useRef)();Object(d.useEffect)((function(){c.register(te,r.current)}),[c]);var i=Object(q.d)((function(){c.closeSelected(),a()}));return Object(u.b)(D.a,{arrowed:!0,globalClose:!1,ref:r,preventCloseOnTarget:!0,placement:"bottom",toggler:Object(u.b)("div",{css:{height:"28px",transform:"translateX(18px)"}}),children:Object(u.c)("div",{css:{width:"140px",height:"143px",position:"relative"},children:[Object(u.b)("img",{src:t,alt:n,css:{width:"100px",height:"100px",padding:"20px"}}),Object(u.b)("div",{onClick:i,css:{position:"absolute",width:"16px",height:"16px",right:"8px",top:"8px"},children:Object(u.b)(_.b,{size:16})})]})})},fe=n(1909),be=n(1320),ve=["onInsertEmoji","onAddSticker","vipEnabled"],Ce=Object(d.forwardRef)((function(e,t){var n=e.onInsertEmoji,o=void 0===n?M.a:n,a=e.onAddSticker,c=void 0===a?M.a:a,r=e.vipEnabled,i=void 0!==r&&r,s=Object(T.default)(e,ve),l=Object(q.d)((function(e,t){"emoji"===t?o(e.placeholder):c(e)}));return Object(u.b)(D.a,Object.assign(Object.assign({arrowed:!0,preventCloseOnTarget:!0},s),{},{ref:t,children:Object(u.b)(be.a,{noBorder:!0,onSelectEmoticon:l,vipEnabled:i})}))}));var Oe,ge=Object(P.a)((function(e){var t=e.disabled,n=e.onInsertEmoji,o=void 0===n?M.a:n,a=e.onAddSticker,c=void 0===a?M.a:a,r=e.popoversController,i=Object(d.useRef)();Object(d.useEffect)((function(){r.register(ee,i.current)}),[r]);var s=Object(q.d)((function(){o.apply(void 0,arguments),setTimeout(r.position,400)})),l=Object(q.d)((function(){r.openSelected(),c.apply(void 0,arguments),setTimeout(r.position,400)})),m=Object(q.d)((function(t){(0,e.authRequired)([M.a,function(){t.preventDefault()}])()}));return Object(u.b)(Ce,{ref:i,onInsertEmoji:s,onAddSticker:l,vipEnabled:!0,onClick:m,toggler:Object(u.b)(F.a,{label:"插入表情",icon:fe.a,disabled:t,onMouseEnter:r.prepare})})}));function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}function ye(e){var t=e.dynamicImageUrl||e.staticImageUrl,n=e.id,o=e.title||"[sticker]";return'<a class="comment_sticker" href="'.concat(t,'" data-sticker-id="').concat(n,'">').concat(o,"</a>")}function Re(e){var t=e.url,n=e.dataRawwidth,o=e.dataRawheight,a=e.title,c=t.includes(".gif")?"comment_gif":"comment_img";return'<a class="'.concat(c,"\" href='").concat(t,"' data-width='").concat(n||"","' data-height='").concat(o||"","'>[").concat(a||"图片","]</a>")}var ke=function(e){Object(s.a)(n,e);var t=je(n);function n(){var e;Object(c.a)(this,n);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).zaRef=Object(d.createRef)(),e.state={active:!1,hasNoContent:!0,shown:!1,submitting:!1,value:{toHTML:J},images:[],uploadIsFetchingNum:0,stickers:[],toggleInputStyle:!1,commentTextLength:0,showCommentCheckModal:!1},e.isClubPostPage=function(){var t=e.props,n=t.type,o=(t.replyTo||{}).resourceType;return"club_post"===n||"club_post"===o},e.handleCheckClosed=function(){e.setState({showCommentCheckModal:!1}),e.trackCommentCheckClick("返回修改"),e.input.focus()},e.handleCommentCheck=function(){e.setState({showCommentCheckModal:!1}),e.handleSubmit(!1),e.trackCommentCheckClick("继续发布")},e.handleButtonSubmit=function(){e.handleSubmit(!0,"0"!==e.props.autoCheckAb)},e.handleSubmit=e.props.authRequired((function(t,n){return e.context.realNameRequired((function(){var o=e.props,a=o.replyTo,c=o.onSubmit,r=o.onCancel,s=o.rootCommentId,l=o.isConversation,m=o.zaInfo.zaSubmitCommentId;if(!e.state.submitting){e.setState({submitting:!0});var u=e.state,d=u.images,p=u.stickers,h=e.input.toHTML();if(h||d.length||p.length){var f;h&&e.saveLocalComment();var b=h;d.length&&(b+=Re(d[0])),p.length&&(b+=ye(p[0]));var v,C=c(b,a,{rootCommentId:s,isConversation:l},t,n);if(C.then)C.then((function(){var t;(r&&r(),e.input)?(e.input.reset(),null===(t=e.popoverControllerRef.current)||void 0===t||t.closeAll(),e.resetImage(),e.setState({value:{toHTML:J}},(function(){return e.saveLocalComment()}))):e.saveLocalComment({toHTML:J})})).catch((function(t){40313===t.payload.code&&e.setState({showCommentCheckModal:!0})})).finally((function(){e.setState({submitting:!1})}));else e.setState({submitting:!1}),r&&r(),e.input.reset(),null===(v=e.popoverControllerRef.current)||void 0===v||v.closeAll();y.a.trackEvent(Object(i.a)(e),Object.assign({action:"Comment",element:"Button"},m&&{id:m})),null===(f=e.zaRef.current)||void 0===f||f.trackEvent({eventType:"Click",action:"Comment",elementLocation:{type:"Button"}})}}}))()}),e.isClubPostPage()?Y.Y.reply_club:void 0,Z.b),e.handleCommentShow=e.props.authRequired((function(){e.setState({shown:!0}),e.hiddenInput.focus()})),e.handleCommentHide=function(){e.setState({shown:!1})},e.initLocalComment=function(){var t=e.props,n=t.type,o=t.id;if(n&&o){var a=I.a.get(K)||[],c="".concat(n,"_").concat(o),r=a.find((function(e){return e.key===c})),i=r&&r.value;i&&e.setState({value:{toHTML:function(){return i}},hasNoContent:!1})}},e.saveLocalComment=function(t){var n=e.props,o=n.type,c=n.id;if(o&&c){var r=t?t.toHTML():e.state.value.toHTML(),i="".concat(o,"_").concat(c),s=(I.a.get(K)||[]).filter((function(e){return e.key!==i})),l=r?[].concat(Object(a.a)(s.slice(0,4)),[{key:i,value:r}]):s;I.a.set(K,l)}},e.handleChange=function(t){var n=e.state,o=n.stickers,a=n.images;o.length||a.length?e.setState({value:t}):e.setState({value:t,hasNoContent:t.isEmpty}),e.handleInputChange()},e.handleFocus=function(){e.setState({active:!0},e.handleInputChange)},e.handleBlur=function(){var t=e.state,n=t.stickers,o=t.images;n.length||o.length||(e.setState({active:!1}),e.handleInputChange())},e.handleMobileComment=function(){e.handleSubmit(),e.handleCommentHide()},e.handleInputChange=function(){var t,n,o=Object(v.findDOMNode)(e.input);o&&(o.getBoundingClientRect().height>40?e.setState({toggleInputStyle:!0}):e.setState({toggleInputStyle:!1}),n="innerText"in document?o.innerText.length:o.textContent.length,e.setState({commentTextLength:n}),null===(t=e.popoverControllerRef.current)||void 0===t||t.position())},e.handleImages=function(t){var n;e.setState({images:t},null===(n=e.popoverControllerRef.current)||void 0===n?void 0:n.position)},e.handleInputActive=function(t){e.setState({active:t})},e.updatePublishStatus=function(t){e.setState({hasNoContent:t})},e.resetStickers=function(){var t=e.state.value,n=void 0===t.isEmpty||t.isEmpty;e.setState({stickers:[],hasNoContent:n})},e.resetImage=function(){e.resetStickers(),e.resetUploadImg()},e.resetUploadImg=function(){var t=e.state.value,n=void 0===t.isEmpty||t.isEmpty;e.setState({images:[],hasNoContent:n})},e.insertEmoji=function(t){var n;null===(n=e.input)||void 0===n||n.handleCommand("insert-text:".concat(t))},e.addSticker=function(t){e.setState({stickers:[t],images:[],hasNoContent:!1})},e.handleImagePopoverOpen=function(){e.setState({stickers:[]})},e.focusInput=function(t){t.preventDefault(),e.input.focus()},e.popoverControllerRef=Object(d.createRef)(),e.renderInput=function(t){var n,o,a,c=t.placeholder,r=t.className,i=e.props,s=i.autoFocus,l=i.commentWithPicPermission.commentWithPic,m=e.state,d=m.images,p=m.stickers,h=m.toggleInputStyle,f=m.active,b=m.hasNoContent,v=m.commentTextLength;return Object(u.c)("div",{className:j()("CommentEditorV2-inputWrap",{"CommentEditorV2-inputWrap--change":h,"CommentEditorV2-inputWrap--active":f||!b}),onClick:function(e){e.nativeEvent.stopImmediatePropagation()},children:[Object(u.b)(z.c,{keyMap:{FOCUS_COMMENT_INPUT:"shift+c"},handlers:{FOCUS_COMMENT_INPUT:e.focusInput}}),Object(u.b)(A.a,{className:j()("CommentEditorV2-input",r),defaultValue:e.state.value.toHTML(),allowMention:!0,allowPasteRichText:!1,autoFocus:s,outputBlockType:"div",ref:function(t){e.input=t},placeholder:c,onFocus:e.handleFocus,onChange:e.handleChange,onSubmit:e.handleButtonSubmit,minRows:5}),Object(u.c)("div",{className:j()("CommentEditorV2-inputUpload",{"CommentEditorV2-inputUpload--FlexEnd":h,"CommentEditorV2-inputUpload--SpaceBetween":h&&v>980}),children:[h&&v>980&&Object(u.b)(E.a,{className:"CommentEditorV2-MaxLength",current:v,max:1e3}),Object(u.b)("div",{className:"CommentEditorV2-popoverWrap",children:Object(u.c)(oe,{ref:e.popoverControllerRef,children:[Object(u.b)(ue,{images:d,resetUploadImg:e.resetUploadImg,handleInputActive:e.handleInputActive,updatePublishStatus:e.updatePublishStatus,handleImages:e.handleImages,onPopoverOpen:e.handleImagePopoverOpen,hasPermission:l||e.isClubPostPage()}),Object(u.b)(he,{url:(null===(n=p[0])||void 0===n?void 0:n.dynamicImageUrl)||(null===(o=p[0])||void 0===o?void 0:o.staticImageUrl),title:null===(a=p[0])||void 0===a?void 0:a.title,onReset:e.resetStickers}),Object(u.b)(ge,{onAddSticker:e.addSticker,onInsertEmoji:e.insertEmoji,preparePopoverIndex:e.preparePopoverIndex})]})})]})]})},e}return Object(r.a)(n,[{key:"trackCommentCheckClick",value:function(e){y.a.trackEvent(null,{id:7497,action:"Click",path:[{module_name:"图文弹窗"}]},{button:{text:e}})}},{key:"componentDidMount",value:function(){this.initLocalComment(),document.addEventListener("click",this.handleBlur)}},{key:"componentWillUnmount",value:function(){this.saveLocalComment(),document.removeEventListener("click",this.handleBlur)}},{key:"render",value:function(){var e=this.props,t=e.replyTo,n=e.commentNeedsReview,a=e.className,c=e.ownerAuthorIsOrg,r=e.ownerAuthorIsBrand,i=e.commentStatus,s=e.brandCommentText,l=void 0===s?"":s,m=this.state,d=m.active,p=m.hasNoContent,h=m.submitting,f=m.showCommentCheckModal,b=c?"机构":"作者",v={preset:"primary",color:"blue",children:"发布",disabled:p||h},C="写下你的评论...";if(n&&(C=r&&l?l:c?"已开启预审评论，评论由机构筛选后公开":"评论由作者筛选后显示"),t&&t.author){var O=t.author,g=O.member,y=O.mask,k=(null==g?void 0:g.name)||(null==y?void 0:y.name)||t.author.name;C=N()(Oe||(Oe=Object(o.a)(["回复","",""])),k,n?"，评论由".concat(b,"筛选后公开"):"")}return i&&!1===i.canComment&&(C=i.toast),Object(u.c)("div",{children:[Object(u.b)(R.d,{ref:this.zaRef}),Object(u.c)("div",{className:j()(a,"CommentEditorV2--normal",{"CommentEditorV2--active":d||!p}),children:[this.renderInput({placeholder:C}),Object(u.b)(S.c,Object.assign(Object.assign({},v),{},{className:"CommentEditorV2-singleButton",onClick:this.handleButtonSubmit}))]}),f&&Object(u.b)(pe,{onClose:this.handleCheckClosed,onSubmit:this.handleCommentCheck})]})}}]),n}(d.Component);ke.propTypes={className:b.a.string,defaultActive:b.a.bool,replyTo:b.a.object,inCommentItem:b.a.bool,commentNeedsReview:b.a.bool,canComment:b.a.object,onCancel:b.a.func,onSubmit:b.a.func.isRequired,zaInfo:b.a.object},ke.defaultProps={defaultActive:!1,replyTo:null,inCommentItem:!1,autoFocus:!0,ownerAuthorIsOrg:!1,ownerAuthorIsBrand:!1,zaInfo:{}},ke.contextTypes={realNameRequired:b.a.func};t.a=Object(h.compose)(C.withRouter,Object(B.a)(),P.a,Object(O.connect)((function(e){return{stickers:e.commentsV2.stickers||[],commentWithPicPermission:e.commentsV2.commentWithPicPermission||{}}}),{showNotification:Z.h}))(ke)},1320:function(e,t,n){"use strict";var o=n(14),a=n(15),c=n(17),r=n(18),i=n(8),s=n(1),l=n(0),m=n(21),u=n(20),d=n(3),p=n.n(d),h=n(13),f=n.n(h),b=n(320),v=n.n(b),C=n(38),O=n(70),g=n(483),j=n(44),y=n(439),R=n(1169),k=n(47),N=n(201);function w(e){var t,n,o,a,c,r,i,m,u,d=e.className,p=e.emoticonGroupList,h=e.curEmoticonGroupId,b=e.onGroupSelected,v=e.vipEnabled,O=Object(l.useRef)(),g=Object(N.a)(v,p),j=(t=O,n=Object(l.useState)({left:null,x:null}),o=Object(k.a)(n,2),a=o[0],c=o[1],r=Object(l.useState)(!1),i=Object(k.a)(r,2),m=i[0],u=i[1],{onMouseDown:Object(C.d)((function(e){var n;u(!0);var o=null===(n=t.current)||void 0===n?void 0:n.scrollLeft,a=e.clientX;c({left:o,x:a}),e.preventDefault()})),onMouseMove:Object(C.d)((function(e){if(m){var n=e.clientX-a.x;t.current&&(t.current.scrollLeft=a.left-n)}})),onMouseUp:Object(C.d)((function(){m&&u(!1)}))});return Object(s.b)("div",{className:f()("EmoticonsFooter",d),children:Object(s.b)("ul",Object.assign(Object.assign({className:"EmoticonsFooter-items",ref:O},j),{},{children:g.map((function(e){return Object(s.b)("li",{className:f()("EmoticonsFooter-item",{"EmoticonsFooter-item--selected":h===e.id}),onClick:function(){b(e.id)},children:Object(s.b)("img",{alt:"",src:e.iconUrl,className:"EmoticonsFooter-itemIcon"})},e.id)}))}))})}var I=n(1325);function S(e){var t=e.item,n=e.type,o=e.onSelectEmoticon,a=t.title,c=t.staticImageUrl,r=t.dynamicImageUrl,i=function(e){r&&(e.target.src=r)},l=function(e){r&&(e.target.src=c)},m=function(){o(t,n)};return Object(s.c)(O.a,{zaType:"Button",zaText:a,zaEventType:"Click",zaBlock:"vip"===n?"VipEmoticon":"Emoticon",as:"li",className:f()("EmoticonPanel-item",{"EmoticonPanel-item--big":"emoji"!==n}),onClick:m,onKeyPress:function(e){" "===e.key&&m()},tabIndex:0,children:[Object(s.b)("img",{src:c,title:"emoji"===n?a:"",className:f()({"EmoticonPanel-itemImg--small":"emoji"===n,"EmoticonPanel-itemImg--big":"emoji"!==n}),onMouseOver:i,onMouseOut:l,onFocus:i,onBlur:l,alt:a}),"emoji"!==n&&Object(s.b)("span",{className:"EmoticonPanel-itemTitle",children:a})]})}function E(e){var t=e.type,n=e.data,o=void 0===n?[]:n,a=e.onSelectEmoticon;return 0===o.length?Object(s.b)(I.a,{className:"EmoticonPanel-spinner"}):Object(s.b)("ul",{className:"EmoticonPanel",children:o.map((function(e){return Object(s.b)(S,{item:e,type:t,onSelectEmoticon:a},e.id)}))})}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(r.a)(this,n)}}E.propTypes={type:p.a.string.isRequired,data:p.a.array.isRequired,onSelectEmoticon:p.a.func.isRequired};var z=function(e){Object(c.a)(n,e);var t=P(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).getCurEmoticonGroupPanleData=function(){var t=e.props,n=t.curEmoticonGroupId;return t.emoticonPanelList.filter((function(e){return e.groupId===n}))},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.changeSelectedEmoticonPanel,n=e.curEmoticonPanelId,o=e.className,a=this.getCurEmoticonGroupPanleData();return a.length<=1?null:Object(s.b)("ul",{className:f()("EmoticonPagination",o),children:a.map((function(e){return Object(s.b)("li",{className:f()("EmoticonPagination-bullet",{"EmoticonPagination-bullet--active":e.id===n}),onClick:function(){t(e.id)}},e.id)}))})}}]),n}(l.Component);z.propsTypes={className:p.a.string};var B=Object(m.connect)((function(e){var t=e.emoticons;return{curEmoticonGroupId:t.curEmoticonGroupId,emoticonPanelList:t.emoticonPanelList,curEmoticonPanelId:t.curEmoticonPanelId}}),{changeSelectedEmoticonPanel:g.b})(z),A=n(2),T=n(898),L=n(30);function x(e){var t=e.show,n=e.onClick,o=Object(C.d)((function(){null==n||n()}));return t&&Object(s.c)(O.a,{zaType:"Button",zaEventType:"Click",zaAction:"OpenUrl",zaBlock:"VipBrand",extra:{link:{url:L.H}},css:function(e){return Object(A.a)({backgroundColor:e.colorMod(e.colors.GYL08A).alpha(.25),color:e.colors.GYL12A,display:"flex",alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",lineHeight:"17px",userSelect:"none"},"&:hover",{cursor:"pointer"})},onClick:o,children:["开通会员解锁全部会员表情 ",Object(s.b)(T.a,{})]})}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(r.a)(this,n)}}var D={containerClass:"Emoticons-panelContainer",ContainerEl:"ul",threshold:10},F=function(e){Object(c.a)(n,e);var t=M(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={showVipStickerModal:!1},a.setShowVipStickerModal=function(e){a.setState({showVipStickerModal:e})},a.handleGetSwiperInstance=function(e){a.mousetrap=new v.a,a.swiperInstance=e,a.mousetrap.bind("left",(function(){e.slidePrev()})),a.mousetrap.bind("right",(function(){e.slideNext()}))},a.handleEmoticonGroupSelected=function(e){var t=a.props,n=t.getEmoticonsDetail,o=t.emoticonGroupDetail,c=t.changeSelectedEmoticonGroup,r=t.changeSelectedEmoticonPanel;o[e]||n(e),c(e),r("".concat(e,"-0"))},a.handleSlideChange=function(){var e=a.props,t=e.emoticonPanelList,n=e.getEmoticonsDetail,o=e.changeSelectedEmoticonPanel,c=e.changeSelectedEmoticonGroup;if(a.swiperInstance){var r=t[a.swiperInstance.activeIndex];o(r.id),c(r.groupId),0===r.data.length&&n(r.groupId)}},a.handleRequestVip=function(){a.setShowVipStickerModal(!0)},a.handleSelectEmoticon=function(e,t){var n=a.props,o=n.onSelectEmoticon,c=n.isVip;"vip"!==t||c?o(e,t):a.handleRequestVip()},a.swiperInstance=Object(l.createRef)(),a}return Object(a.a)(n,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.changeSelectedEmoticonGroup,n=e.changeSelectedEmoticonPanel,o=e.emoticonPanelList;t(o[0].groupId),n(o[0].id),this.mousetrap.reset()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.emoticonGroupList,a=void 0===o?[]:o,c=t.curEmoticonGroupId,r=t.emoticonPanelList,i=t.curEmoticonPanelId,l=t.isVip,m=t.vipEnabled,u=void 0!==m&&m,d=t.Swiper,p=t.noBorder,h=void 0!==p&&p,b=this.state.showVipStickerModal,v=this.setShowVipStickerModal,C=Object(N.a)(u,r);return Object(s.b)(O.b,{block:"EmoticonsCard",children:Object(s.c)("div",{className:f()("Emoticons",{"Emoticons--bordered":!h},n),children:[d?Object(s.b)(d,Object.assign(Object.assign({},D),{},{activeSlideKey:i,getSwiper:this.handleGetSwiperInstance,on:{slideChange:this.handleSlideChange},children:C.map((function(t){return Object(s.b)("li",{className:"Emoticons-panels-item",children:Object(s.b)(E,{type:t.type,data:t.data,onSelectEmoticon:e.handleSelectEmoticon})},t.id)}))})):Object(s.b)("div",{css:{height:183}}),Object(s.b)(B,{className:"Emoticons-Pagination"}),Object(s.b)(x,{show:u&&!l,onClick:this.handleRequestVip}),Object(s.b)(w,{emoticonGroupList:a,curEmoticonGroupId:c,onGroupSelected:this.handleEmoticonGroupSelected,vipEnabled:u}),Object(s.b)(R.b,{show:b,setShow:v,type:R.a.comment_sticker})]})})}}]),n}(l.Component);F.propTypes={className:p.a.string,onSelectEmoticon:p.a.func};t.a=Object(u.compose)(Object(m.connect)((function(e){var t=e.emoticons,n=t.emoticonGroupList,o=t.curEmoticonGroupId,a=t.emoticonGroupDetail,c=t.emoticonPanelList;return{emoticonGroupList:n,curEmoticonGroupId:o,emoticonGroupDetail:a,emoticonPanelList:void 0===c?[]:c,curEmoticonPanelId:t.curEmoticonPanelId,isVip:Object(j.j)(e)}}),{getEmoticonsDetail:g.e,changeSelectedEmoticonGroup:g.a,changeSelectedEmoticonPanel:g.b}),Object(y.a)(null),(function(e){return function(t){var o=Object(C.e)((function(){return Promise.all([n.e(71),n.e(86)]).then(n.t.bind(null,2855,7))}));return Object(s.b)(e,Object.assign(Object.assign({},t),{},{Swiper:o}))}}))(F)},1323:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var o=n(14),a=n(15),c=n(17),r=n(18),i=n(8),s=n(1),l=n(0),m=n(3),u=n.n(m),d=n(13),p=n.n(d),h=n(259),f=n(34),b=n(149),v=n(1114),C=n(2327);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(r.a)(this,n)}}var g={normal:{text:"默认排序",value:"reverse"},reverse:{text:"时间排序",value:"normal"}},j=function(e){Object(c.a)(n,e);var t=O(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={text:"时间排序",value:"normal"},e.switchType=function(t){var n=e.state.value,o=e.props.onOrderChange,a=g[n],c=a.text,r=a.value;e.setState({text:c,value:r}),o&&o(r,t)},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.state.text,t=this.props,n=t.isConversation,o=t.commentClosed;return t.shouldReverse?!n&&!o&&Object(s.b)(f.c,{preset:"plain",onClick:this.switchType,icon:C.a,label:"切换为".concat(e)}):null}}]),n}(l.Component);j.propTypes={isConversation:u.a.bool,commentClosed:u.a.bool,onOrderChange:u.a.func,shouldReverse:u.a.bool};var y=n(1162);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(r.a)(this,n)}}var k=function(e){Object(c.a)(n,e);var t=R(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.commentPattern,n=e.onNavBack;return Object(s.b)("h2",{className:"CommentTopbar-title",children:"bottom"!==t?Object(s.c)(f.c,{className:"CommentTopbar-back",preset:"plain",onClick:n,children:[Object(s.b)(y.a,{text:!0,center:!0})," 返回评论"]}):Object(s.b)("div",{children:"查看对话"})})}}]),n}(l.Component);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(r.a)(this,n)}}k.propTypes={commentPattern:u.a.string,onNavBack:u.a.func};var w=function(e){Object(c.a)(n,e);var t=N(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).renderTopBarSwitch=function(){var t=e.props,n=t.isMobile,o=t.status,a=t.isConversation,c=t.commentCount,r=t.onOrderChange,i=t.commentClosed,l=t.shouldReverse;return!n&&Boolean(c&&!i)&&"reviewing"!==o&&Object(s.b)(j,{isConversation:a,onOrderChange:r,commentClosed:i,shouldReverse:l})},e}return Object(a.a)(n,[{key:"renderTitle",value:function(){var e=this.props,t=e.commentCount,n=e.commentClosed,o=e.isConversation,a=e.onNavBack,c=e.targetLink,r=e.isCommentReviewer,i=e.reviewingCounts,m=e.onStatusChange,u=e.status,d=e.commentPattern,v=e.isOrg,C=e.isMobile;return o?Object(s.b)(k,{commentPattern:d,onNavBack:a}):r&&!n?Object(s.c)("div",{className:"CommentTopbar-tabsWrapper",children:[Object(s.c)(h.b,{className:"CommentTopbar-tabs",children:[Object(s.b)(h.a,{className:"CommentTopbar-tab","aria-controls":"CommentTopbar-open",meta:Object(b.formatNumber)(t),children:Object(s.b)(f.c,{className:p()("CommentTopbar-tabButton",{"is-active":"open"===u}),onClick:function(){return m("open")},children:"公开评论"})}),!C&&Object(s.b)(h.a,{className:"CommentTopbar-tab","aria-controls":"CommentTopbar-reviewing",meta:void 0===i?null:Object(b.formatNumber)(i),children:Object(s.b)(f.c,{className:p()("CommentTopbar-tabButton",{"is-active":"reviewing"===u}),onClick:function(){return m("reviewing")},children:"待".concat(v?"审核":"筛选","评论")})})]}),c]}):Object(s.b)(l.Fragment,{children:Object(s.c)("h2",{className:"CommentTopbar-title",children:[t&&!n?"".concat(Object(b.formatNumber)(t)," 条评论"):"还没有评论",c]})})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.onRef,o=e.isMobile;return Object(s.b)(v.a,{className:p()("CommentTopbar",t),onRef:n,header:this.renderTitle(),options:this.renderTopBarSwitch(),showOptions:!o})}}]),n}(l.Component);w.propTypes={commentCount:u.a.oneOfType([u.a.number,u.a.string]),isConversation:u.a.bool,onNavBack:u.a.func,isCommentReviewer:u.a.bool,onStatusChange:u.a.func,onOrderChange:u.a.func,status:u.a.string,reviewingCounts:u.a.oneOfType([u.a.number,u.a.string]),targetLink:u.a.node,commentClosed:u.a.bool,commentPattern:u.a.string,isOrg:u.a.bool,isMobile:u.a.bool,options:u.a.element,shouldReverse:u.a.bool},w.defaultProps={shouldReverse:!0}},1325:function(e,t,n){"use strict";var o=n(1),a=n(3),c=n.n(a),r=n(13),i=n.n(r),s=Array.from(Array(12),(function(e,t){return Object(o.b)("span",{className:"Spinner-blade-12"},t)}));function l(e){var t=e.className,n=e.white,a=e.large;return Object(o.b)("div",{className:i()("Spinner-blade",t,{"Spinner-blade--large":a,"Spinner-blade--white":n}),children:s})}l.propTypes={className:c.a.string,large:c.a.bool,white:c.a.bool};var m=l;t.a=m},1457:function(e,t,n){"use strict";function o(e,t,n){var o;return["answer","question"].includes(e)?"question"===e?null==n?void 0:n.censorCommentDescription:null==t||null===(o=t.brand)||void 0===o?void 0:o.censorCommentDescription:""}n.d(t,"a",(function(){return o}))},1494:function(e,t,n){"use strict";var o=n(47),a=n(1),c=n(83),r=n.n(c),i=n(5),s=n(201),l=n(4),m=n(122);function u(e){return e.reduce((function(e,t){var n;return[].concat(Object(l.a)(e),Object(l.a)(null!==(n=t.stickers)&&void 0!==n?n:[]))}),[])}var d=function(){return window.zh_emoticon?Promise.resolve(u(window.zh_emoticon)):Object(m.loadScript)("https://unpkg.zhimg.com/@cfe/emoticon@1.2.4/lib/emoticon.js").then((function(){return window.zh_emoticon?u(window.zh_emoticon):[]}))},p=n(0);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alwaysShow,n=void 0!==t&&t;return function(e){return r()((function(t){var c=Object(p.useState)(!1),r=Object(o.a)(c,2),l=r[0],m=r[1];return Object(p.useEffect)((function(){Object(s.c)()?m(!0):d().then((function(e){Object(s.e)(Object(i.camelizeKeys)(e)),m(!0)})).catch((function(){m(!0)}))}),[]),(l||n)&&Object(a.b)(e,Object.assign({},t))}),e)}}},1501:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n(32),a=n(4),c=n(14),r=n(15),i=n(17),s=n(18),l=n(8),m=n(1),u=n(0),d=n(50),p=n(13),h=n.n(p),f=n(967),b=n(150),v=n(1068),C=["html","className","prefix"];function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(s.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=O(n);function n(){var e;Object(c.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={previewImg:null},e.handlePreview=function(t){var n=t.target,o=e.props.onPreviewImage;"function"==typeof o?o(t).catch((function(){e.setState({previewImg:n})})):e.setState({previewImg:n})},e}return Object(r.a)(n,[{key:"mount",value:function(){var e=this;this.imagesGifNode=this.root.getElementsByClassName("comment_gif"),this.imagesNode=this.root.getElementsByClassName("comment_img"),this.imagesStickerNode=this.root.getElementsByClassName("comment_sticker"),this.imgNode=this.root.getElementsByClassName("origin_image zh-lightbox-thumb"),this.imagesNodes=Array.from([].concat(Object(a.a)(this.imagesGifNode),Object(a.a)(this.imagesNode),Object(a.a)(this.imagesStickerNode),Object(a.a)(this.imgNode))).map((function(t){var n=t.dataset||{},o=n.width,a=n.height,c=n.rawwidth,r=n.rawheight,i=Number(o||c),s=Number(a||r),l=document.createElement("div");l.className="Richtext-content_img",t.parentNode.replaceChild(l,t);var m=t.getAttribute("href")||t.getAttribute("src"),u=new Image,d=t.getAttribute("class");return"comment_sticker"!==d&&l.addEventListener("click",e.handlePreview),u.className=d,u.src=m,u.dataset.original=Object(b.imgUrl)(m,"r"),u.dataset.rawwidth=i,u.onload=function(){i===s||"comment_sticker"===d?l.classList.add("Richtext-content_img-square"):i>s?l.classList.add("Richtext-content_img-square--wideShape"):l.classList.add("Richtext-content_img-square--highShape"),l.appendChild(u)},l}))}},{key:"unmount",value:function(){this.imagesNodes&&this.imagesNodes.forEach((function(e){Object(d.unmountComponentAtNode)(e)}))}},{key:"componentDidMount",value:function(){this.mount()}},{key:"UNSAFE_componentWillUpdate",value:function(e){this.props.html!==e.html&&this.unmount()}},{key:"componentDidUpdate",value:function(e){e.html!==this.props.html&&this.mount()}},{key:"componentWillUnmount",value:function(){this.unmount()}},{key:"render",value:function(){var e=this,t=this.state.previewImg,n=this.props,a=n.html,c=n.className,r=n.prefix,i=Object(o.default)(n,C);return Object(m.c)("div",{className:h()("CommentRichText",c),ref:function(t){return e.root=t},children:[r,Object(m.b)(v.a,Object.assign({html:a},i)),t&&Object(m.b)(f.a,{className:"CommentRichText-ImageView",img:t,onClose:function(){return e.setState({previewImg:null})}})]})}}]),n}(u.Component)},1773:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n(14),a=n(15),c=n(17),r=n(18),i=n(8),s=n(1),l=n(0),m=n(441);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(r.a)(this,n)}}var d=function(e){Object(c.a)(n,e);var t=u(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.onRef;return Object(s.b)("div",{className:"Comments-pattern-loading",ref:e,children:Object(s.b)(m.a,{})})}}]),n}(l.PureComponent)},1774:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n(47),a=n(1),c=n(0),r=n(932),i=n(1351),s=n(114),l=n.n(s);function m(e){var t=e.onClick,n=e.commentsElRef,s=Object(c.useState)(!1),m=Object(o.a)(s,2),u=m[0],d=m[1],p=Object(c.useState)(0),h=Object(o.a)(p,2),f=h[0],b=h[1];return Object(c.useEffect)((function(){var e=n.current;if(e){var t=e.getBoundingClientRect().right;b(t-16)}}),[n]),Object(c.useEffect)((function(){var e=l()((function(){var e=n.current;if(e){var t=window.innerHeight,o=e.getBoundingClientRect(),a=o.top,c=o.bottom,r=o.height;d(r>500&&c>t&&a<0)}}),100);return window.addEventListener("scroll",e),function(){e.cancel(),window.removeEventListener("scroll",e)}}),[n]),Object(r.e)(u,null,{from:{opacity:0,left:f},enter:{opacity:1,left:f},leave:{opacity:0,left:f}}).map((function(e){var n=e.item,o=e.key,c=e.props;return n&&Object(a.c)(r.a.button,{style:c,onClick:t,className:"CommentCollapseButton",children:["收起评论",Object(a.b)(i.a,{center:!0})]},o)}))}},1908:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),a=n.n(o),c=n(12),r=Object.assign;function i(e){return a.a.createElement(c.a,r(r({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ImagePlus24","data-old-api":"AddImage"},e),{className:"Zi Zi--AddImage"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M3 5.42a2.415 2.415 0 012.415-2.416h13.17a2.415 2.415 0 012.414 2.415V11.5a.75.75 0 01-1.5 0V5.42a.915.915 0 00-.915-.916H5.415a.915.915 0 00-.915.915v7.42a.75.75 0 01-1.5 0V5.42zm12.09 8.022a5.57 5.57 0 00-3.192 1.005l-2.053 1.435a8.52 8.52 0 01-4.882 1.538H4.5v1.16c0 .506.41.916.915.916H14a.75.75 0 010 1.5H5.415A2.415 2.415 0 013 18.58v-1.356c0-.72.585-1.305 1.305-1.305h.658a7.02 7.02 0 004.023-1.267l2.052-1.435a7.07 7.07 0 014.051-1.276h.191a.75.75 0 110 1.5h-.19zM6.5 8.937a2.417 2.417 0 114.833 0 2.417 2.417 0 01-4.833 0zm2.417-.917a.917.917 0 100 1.834.917.917 0 000-1.834zM19.5 14a.75.75 0 01.75.75v2h2a.75.75 0 010 1.5h-2v2a.75.75 0 01-1.5 0v-2h-2a.75.75 0 010-1.5h2v-2a.75.75 0 01.75-.75z",fillRule:"evenodd",clipRule:"evenodd"}))}},1909:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),a=n.n(o),c=n(12),r=Object.assign;function i(e){return a.a.createElement(c.a,r(r({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"EmoHappy24","data-old-api":"Emotion"},e),{className:"Zi Zi--Emotion"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{d:"M10 10.25a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zm6.5 0a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z"}),a.a.createElement("path",{d:"M8.712 13.807a.75.75 0 01.98.406 2.488 2.488 0 001.352 1.347 2.503 2.503 0 003.263-1.347.75.75 0 011.386.575 3.99 3.99 0 01-2.164 2.159 4.004 4.004 0 01-5.222-2.16.75.75 0 01.405-.98z",fillRule:"evenodd",clipRule:"evenodd"}))}},2327:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),a=n.n(o),c=n(12),r=Object.assign;function i(e){return a.a.createElement(c.a,r(r({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowSwitch24","data-old-api":"Switch"},e),{className:"Zi Zi--Switch"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M18.296 8.592a.75.75 0 101.149-.964l-3.87-4.61a.747.747 0 00-1.057-.092.748.748 0 00-.268.574v17a.75.75 0 001.5 0V5.56l2.546 3.032zM9.75 20.5a.749.749 0 01-.293.595.75.75 0 01-1.097-.056l-3.87-4.613a.75.75 0 111.15-.964l2.61 3.111V3.5a.75.75 0 111.5 0v17z",fillRule:"evenodd",clipRule:"evenodd"}))}},2617:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),a=n.n(o),c=n(12),r=Object.assign;function i(e){return a.a.createElement(c.a,r(r({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowShapeTurnLeftFill24","data-old-api":"Reply"},e),{className:"Zi Zi--Reply"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M10.75 5.414c0-1.559-1.885-2.34-2.988-1.237l-6.585 6.585a1.75 1.75 0 000 2.475l6.585 6.586c1.103 1.103 2.988.322 2.988-1.237v-2.83c3.086.053 4.95.44 6.289 1.042 1.434.646 2.33 1.566 3.54 2.82l.037.039c.374.388.915.477 1.36.282.456-.2.76-.68.685-1.24-.286-2.162-1.287-4.77-3.31-6.845-1.919-1.968-4.723-3.422-8.601-3.588V5.414z",fillRule:"evenodd",clipRule:"evenodd"}))}},2890:function(e,t,n){"use strict";n.r(t);var o=n(32),a=n(14),c=n(15),r=n(17),i=n(18),s=n(8),l=n(1),m=n(0),u=n.n(m),d=n(3),p=n.n(d),h=n(49),f=n(21),b=n(20),v=n(13),C=n.n(v),O=n(314),g=n(1184),j=n.n(g),y=n(70),R=n(435),k=n(1071),N=n(149),w=n(31),I=n(90),S=n(473),E=n(44),P=n(130),z=n(1240),B=n(913),A=n(1494),T=n(201),L=function(e){return Object.assign(Object.assign({},e),{},{richText:Object(T.d)(e.content)})},x=n(1319),M=n(1773),D=n(1323),F=n(1774),V=n(152),_=n(34),H=n(2281),q=n(1082),U=n(892),G=n(2617),W=n(878),Z=n(1336),Y=n(1584),K=n(1161),J=n(12),X=Object.assign;function Q(e){return u.a.createElement(J.a,X(X({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Thumb24","data-old-api":"LikeOutline"},e),{className:"Zi Zi--LikeOutline"+(e.className?" ".concat(e.className):"")}),u.a.createElement("path",{d:"M13.22 8.75a1.5 1.5 0 01-.373-1.166l.114-1.022a3.326 3.326 0 00-1.64-3.246.88.88 0 00-1.321.762v.553c0 .501-.092.998-.272 1.466a4.918 4.918 0 01-4.59 3.153H4.5a.25.25 0 00-.25.25V19c0 .139.112.25.25.25H7c2.836 0 6.546.197 8.92.343a2.284 2.284 0 002.324-1.59l1.823-5.832a2.25 2.25 0 00-2.148-2.921h-3.581a1.5 1.5 0 01-1.118-.5zm1.26-2.5a4.826 4.826 0 00-2.407-4.232c-1.587-.919-3.573.226-3.573 2.06v.553c0 .317-.058.632-.172.928a3.418 3.418 0 01-3.19 2.191H4.5A1.75 1.75 0 002.75 9.5V19c0 .966.782 1.75 1.75 1.75H7c2.786 0 6.456.194 8.828.34a3.784 3.784 0 003.848-2.64l1.823-5.832c.754-2.414-1.05-4.868-3.58-4.868h-3.581l.114-1.023a4.86 4.86 0 00.029-.477z",fillRule:"evenodd",clipRule:"evenodd"}))}var $=Object.assign;function ee(e){return u.a.createElement(J.a,$($({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ChatBubble24","data-old-api":"SpeechBalloonOutline"},e),{className:"Zi Zi--SpeechBalloonOutline"+(e.className?" ".concat(e.className):"")}),u.a.createElement("path",{d:"M11.984 3C6.866 3 3 7.195 3 11.988 3 17.557 7.554 21 12 21c1.473 0 3.109-.393 4.44-1.178l.01-.006c.214-.13.335-.194.432-.224a.248.248 0 01.173 0l.02.006 1.662.493c.447.138.928.043 1.269-.271a1.27 1.27 0 00.348-1.29l-.004-.015-.553-1.85a.751.751 0 00-.011-.036c-.025-.07-.01-.104-.01-.104l.02-.032c.76-1.399 1.204-2.95 1.204-4.48C21 7.278 17.217 3 11.984 3zm0 1.5C7.73 4.5 4.5 7.988 4.5 11.988c0 .588.061 1.147.175 1.677C5.456 17.3 8.738 19.5 12 19.5c1.231 0 2.597-.334 3.674-.967.402-.246 1.031-.63 1.837-.37l1.282.38-.428-1.434a1.616 1.616 0 01.12-1.346c.654-1.209 1.015-2.51 1.015-3.75 0-3.959-3.163-7.513-7.516-7.513z",fillRule:"evenodd",clipRule:"evenodd"}))}var te=n(289),ne=n(221),oe=n(382),ae=n(525),ce=n(120),re=n(1069),ie=n(935),se=n(946),le=n(469),me=n(1457),ue=n(1501),de=n(30);function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(i.a)(this,n)}}var he=function(e){Object(r.a)(n,e);var t=pe(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).zaRef=Object(m.createRef)(),e.state={isReplying:!1,deleteModal:!1},e.toggleReply=e.props.authRequired((function(){var t=e.props,n=t.commentStatus,o=t.showNotification;n&&!1===n.canReply?o(n.toast,"red",w.b):e.setState({isReplying:!e.state.isReplying})}),"club_post"===e.props.type?de.Y.reply_club:void 0,w.b),e.like=e.props.authRequired((function(t){var n=e.props;(0,n.onLike)(n.comment.id,t),e.zaRef.current.trackEvent({action:"Upvote",eventType:"Click",elementLocation:{type:"Button"}})}),de.Y.like,w.b),e.dislike=e.props.authRequired((function(){var t=e.props;(0,t.onDislike)(t.comment.id),e.zaRef.current.trackEvent({action:"UnUpvote",eventType:"Click",elementLocation:{type:"Button"}})}),de.Y.like,w.b),e.delete=function(){var t=e.props;return(0,t.onDelete)(t.comment.id)},e.feature=function(t){var n=e.props,o=n.onFeature,a=n.comment.id;o(t?"".concat(a,"_featured"):a)},e.collapse=function(){var t=e.props;(0,t.onCollapse)(t.comment.id)},e.approve=function(){var t=e.props;(0,t.onApprove)(t.comment.id)},e.reject=function(){var t=e.props;(0,t.onReject)(t.comment.id)},e.showConversation=function(t){var n=e.props;(0,n.onShowConversation)({commentId:n.comment.id,isAnchorComments:t})},e.stopReply=function(){e.setState({isReplying:!1})},e.closeReportModal=function(e){if(e){var t=e.result.payload,n=t&&t.message||t&&t.code&&"举报失败";e.commentDeleteResult&&!(e.commentDeleteResult.payload||{}).code?re.b.showModal({reportText:n}):t&&t.sarcasmRecommend||Object(ce.b)(n||"举报成功")}},e.handleCloseDelete=function(){return e.setState({deleteModal:!1})},e.handleDelete=function(){return e.setState({deleteModal:!0})},e.handleClick=function(t,n){var o=e.props.parent,a=o.type,c=o.id;Object(te.e)(Object(oe.a)({type:a,id:c},{utm_campaign:"routine",utm_medium:"internal",utm_source:"video",utm_content:n})),t.stopPropagation(),t.preventDefault()},e}return Object(c.a)(n,[{key:"renderRoleInfo",value:function(e,t){return"normal"===e?null:Object(l.b)("span",{className:"CommentItemV2-roleInfo",children:"ancestor"===e||"author"===e&&"question"===t?" (提问者) ":" (作者) "})}},{key:"renderReplyTo",value:function(){var e=this.props.comment,t=e.replyToAuthor,n=e.resourceType;if(!t)return null;var o=t.member,a=t.role,c=t.mask;return Object(l.c)(m.Fragment,{children:[Object(l.b)("span",{className:"CommentItemV2-reply",children:"回复"}),Object(l.b)(ie.a,{noBadge:!0,noHoverCard:!0,user:o||c||{}}),this.renderRoleInfo(a,n)]})}},{key:"renderItem",value:function(){var e,t,n=this,o=this.props,a=o.isConversation,c=o.ownerAuthorIsOrg,r=o.parent,i=r.canComment,s=(i=void 0===i?{status:!0}:i).status,u=r.questionType,d=r.question,p=r.brand,h=o.parent,f=o.commentNeedsReview,b=o.comment,v=o.onReply,O=o.status,g=o.type,j=o.canOperate,y=o.commentPattern,R=o.rootCommentId,k=o.byComment,N=o.isReverseAndStatusOpen,w=o.hasRecommend,I=o.permission.canBrandAdminEdit,S=o.showCollapsed,E=o.isMobile,P=this.state.isReplying,z=b.id,B=b.author,A=b.richText,T=b.content,L=b.voteCount,M=b.replyToAuthor,D=b.isAuthor,F=b.createdTime,J=b.addressText,X=b.featured,$=b.voting,te=b.reviewing,ne=b.disliked,oe=b.resourceType,ce=b.childCommentCount,de=b.allowDelete,pe=b.allowVote,he=b.canRecommend,fe=b.canCollapse,be=b.collapsedReason,ve=void 0===be?"":be,Ce=b.isDelete,Oe=b.collapsed,ge=b.top,je=Oe&&!S,ye=je?"该评论已被折叠":Ce?function(e){var t=e.content,n=e.deleteReason;if(n){var o=JSON.stringify({button:{text:String(n.reasonId)}}).replace(/"/g,"&quot;");return'<a href="'.concat(n.url,'" target="_blank" data-za-detail-view-id="7641" data-za-extra="').concat(o,'">').concat(n.tip,"</a>")}return t}(b):A||T,Re=Ce||je,ke=B||{},Ne=ke.role,we=ke.mask,Ie=(null==B?void 0:B.member)||we,Se=Boolean(M),Ee=X&&(ce>0||Se)&&!a||k&&Se||N&&Se,Pe=null!==(e=Object(me.a)(g,d,p))&&void 0!==e?e:"",ze=D||de&&("question"!==g||"commercial"===u),Be=Object(l.c)("div",{className:"CommentItemV2-footer",children:[Object(l.c)(_.c,{className:C()("CommentItemV2-likeBtn",$&&"is-liked"),preset:"plain",onClick:this.like,disabled:D||!s,children:[Object(l.b)(H.a,{style:{marginRight:5},center:!0,size:16}),L>0?L:"赞"]}),Oe&&ve&&Object(l.c)("div",{className:"CommentItemV2-walleTag",children:["阴阳怪气自动折叠"===ve&&Object(l.b)(q.a,{size:16,className:"CommentItemV2-walleIcon"}),ve]}),Ee&&Object(l.c)(_.c,{preset:"plain",className:"CommentItemV2-talkBtn",onClick:function(){return n.showConversation(Se)},children:[Object(l.b)(U.a,{style:{marginRight:5},center:!0,size:16}),"查看回复"]}),!D&&s&&!Oe&&Object(l.c)(_.c,{preset:"plain",className:C()({"CommentItemV2-hoverBtn":!P}),onClick:this.toggleReply,children:[Object(l.b)(G.a,{style:{marginRight:5},center:!0,size:16}),P?"取消回复":"回复"]}),he&&!w&&j&&Object(l.c)(_.c,{className:C()({"CommentItemV2-hoverBtn":!D&&!P}),preset:"plain",onClick:function(){return n.feature(X)},children:[Object(l.b)(W.a,{style:{marginRight:5},center:!0,size:16}),X?"取消推荐":"推荐"]}),fe&&!D&&Object(l.c)(_.c,{className:C()({"CommentItemV2-hoverBtn":!D&&!P}),preset:"plain",onClick:this.collapse,children:[Object(l.b)(Z.a,{style:{marginRight:5},center:!0,size:14}),Oe?"取消折叠":"折叠"]}),pe&&!D&&j&&Object(l.c)(_.c,{className:C()({"CommentItemV2-hoverBtn":!P}),preset:"plain",onClick:this.dislike,disabled:!s,children:[Object(l.b)(H.a,{style:{transform:"rotate(180deg)",marginRight:5},size:16,center:!0}),ne?"取消踩":"踩"]}),D||Object(l.c)(m.Fragment,{children:[Object(l.b)(le.a,{id:z,type:"comment",className:"CommentItemV2-hoverBtn",onModalShown:function(e,t){e||n.closeReportModal(t)},modalProps:Object.assign(Object.assign({},ze&&{onDeleteComment:this.delete}),{},{notification:{failure:ae.a}})}),"question"===g&&"commercial"===u&&I&&Object(l.c)(_.c,{className:"CommentItemV2-hoverBtn",preset:"plain",onClick:this.reject,children:[Object(l.b)(Z.a,{style:{marginRight:5},center:!0,size:16}),"隐藏"]})]}),ze&&Object(l.c)(_.c,{className:C()({"CommentItemV2-hoverBtn":!D&&!P&&!P}),preset:"plain",onClick:this.handleDelete,children:[Object(l.b)(Y.a,{style:{marginRight:5},center:!0,size:16}),"删除"]}),Object(l.b)(re.a,{shown:this.state.deleteModal,id:z,onDelete:this.delete,onClose:this.handleCloseDelete})]});return t=P?Object(l.c)("div",{children:[Be,Object(l.b)(x.a,{type:"comment",id:z,commentNeedsReview:f,className:"CommentItemV2-editor",defaultActive:!0,replyTo:b,onCancel:this.stopReply,onSubmit:v,rootCommentId:R,isConversation:a,brandCommentText:Pe})]}):"reviewing"===O?Object(l.c)("div",{className:"CommentItemV2-footer",children:[Object(l.c)(_.c,{preset:"plain",onClick:this.approve,children:[Object(l.b)(K.a,{style:{marginRight:5},center:!0,size:14}),"公开"]}),Object(l.c)(_.c,{className:"CommentItemV2-hoverBtn",preset:"plain",onClick:this.handleDelete,children:[Object(l.b)(Y.a,{style:{marginRight:5},center:!0,size:16}),"删除"]}),Object(l.b)(re.a,{shown:this.state.deleteModal,id:z,onDelete:this.delete,onClose:this.handleCloseDelete})]}):Be,Object(l.c)("div",{children:[Object(l.c)("div",{className:"CommentItemV2-meta",children:[Ie&&Object(l.b)(se.a,{className:"CommentItemV2-avatar",noHoverCard:"fixed"===y||"club_post"===g,user:Ie}),Ie&&Object(l.b)(ie.a,{noBadge:!0,noHoverCard:!0,user:Ie}),this.renderRoleInfo(Ne,oe),this.renderReplyTo(),ge&&Object(l.b)("span",{className:"CommentItemV2-officialTop",children:"官方置顶"}),te&&Object(l.b)(Z.a,{className:"CommentItemV2-reviewing","data-tooltip":"".concat(!1===c?"评论未公开，由作者筛选后显示":"已开启预审评论，评论由机构筛选后公开"),"aria-label":"".concat(!1===c?"评论未公开，由作者筛选后显示":"已开启预审评论，评论由机构筛选后公开"),center:!0,size:14}),Object(l.c)("span",{className:"CommentItemV2-time",children:[J&&"".concat(J," · "),Object(V.toSmartString)(F)]})]}),Object(l.c)("div",{className:"CommentItemV2-metaSibling",children:[Object(l.b)(ue.a,{className:C()("CommentItemV2-content",{"CommentItemV2-shield":Re}),html:ye}),"zvideo"===h.type&&E&&Object(l.c)("div",{className:"CommentItemV2-zvideoFooter",children:[Object(l.c)("div",{role:"button",tabIndex:0,onClick:function(e){return n.handleClick(e,"agree")},children:[L>0&&L,$?Object(l.b)(H.a,{style:{marginRight:20,marginLeft:5},center:!0,size:14}):Object(l.b)(Q,{style:{marginRight:20,marginLeft:5},center:!0,size:14})]}),Object(l.b)("div",{role:"button",tabIndex:0,"aria-label":"回复",onClick:function(e){return n.handleClick(e,"reply")},children:Object(l.b)(ee,{center:!0,size:14})})]}),!Re&&t]})]})}},{key:"render",value:function(){var e=this.props,t=e.comment,n=e.onRef;return Object(l.c)(y.b,{content:{type:"Comment",id:String(t.id)},children:[Object(l.b)(y.d,{ref:this.zaRef}),Object(l.b)("div",{className:"CommentItemV2",ref:n,children:this.renderItem()})]})}}]),n}(m.Component);he.propTypes={comment:p.a.object.isRequired,parent:p.a.object.isRequired,commentNeedsReview:p.a.bool,type:p.a.string,isConversation:p.a.bool,onLike:p.a.func.isRequired,onShowConversation:p.a.func,onReply:p.a.func,onFeature:p.a.func,onDelete:p.a.func.isRequired,onCollapse:p.a.func,commentPattern:p.a.string,showCollapsed:p.a.bool};var fe=Object(b.compose)(h.withRouter,ne.a,Object(f.connect)((function(e){return{isWechat:e.env.userAgent.Wechat,permission:Object(P.cb)(e),isMobile:e.env.userAgent.Mobile}}),{showNotification:w.h}))(he),be=n(2);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(i.a)(this,n)}}var Ce=function(e){Object(r.a)(n,e);var t=ve(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={},e.handleClick=function(){var t=e.props,n=t.loadRestComments,o=t.onShowConversation,a=t.comment,c=a.id,r=a.childCommentCount,i=r<=5&&r>2;(i?n:o)({commentId:c}),i&&e.setState(Object(be.a)({},"hide_".concat(c),!0))},e.handleRef=function(t){var n=e.props.onRef;"function"==typeof n&&n(t)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.comment,n=t.id,o=t.childCommentCount,a=e.isFetching,c=e.className,r=this.state["hide_".concat(n)],i=o<=5&&o>2?"展开其他 ".concat(o-2," 条回复"):"查看全部 ".concat(o," 条回复");return Object(l.c)("div",{className:c,ref:this.handleRef,children:[!r&&Object(l.b)("div",{className:"CommentMoreReplyButton",children:Object(l.b)(_.c,{preset:"plain",onClick:this.handleClick,children:i})}),a&&Object(l.b)(R.a,{className:"CommentMoreReplyButton",small:!0})]})}}]),n}(m.Component);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(i.a)(this,n)}}Ce.propTypes={comment:p.a.object.isRequired,isFetching:p.a.bool,onShowConversation:p.a.func,loadRestComments:p.a.func};var ge=function(e){Object(r.a)(n,e);var t=Oe(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).loadRestComments=function(t){var n=t.commentId;(0,e.props.loadConversation)({id:n,isLoadRest:!0})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.parent,n=t.type,o=t.author,a=(o=void 0===o?{isOrg:!1}:o).isOrg,c=e.parent,r=e.commentNeedsReview,i=e.onShowConversation,s=e.status,u=e.onItemLike,d=e.onItemDelete,p=e.onItemCollapse,h=e.onItemDislike,f=e.onItemApprove,b=e.onItemReject,v=e.canOperateItem,O=e.commentPattern,g=e.commentStatus,j=e.conversation,y=void 0===j?{}:j,R=e.entities,k=e.byComment,N=e.isReverseAndStatusOpen,w=e.comment,I=e.onReply,S=e.onFeature,E=e.ids,P=e.showCollapsed,z=w.id,B=w.featured,A=w.childComments,T=void 0===A?[]:A,x=w.childCommentCount,M=void 0===x?0:x,D=B?"".concat(z,"_featured"):"".concat(z),F=!B&&E.includes("".concat(z,"_featured")),V=Boolean(T.length)&&!N,_=M<=5&&M>2,H=T.map((function(e){return R.comments[e]})).map(L),q=!B&&M>2&&!N,U=(_&&y[z]||{isFetching:!1}).isFetching;return Object(l.c)(m.Fragment,{children:[Object(l.b)("li",{className:C()({"NestComment--rootCommentNoChild":!V,"NestComment--rootComment":V}),children:Object(l.b)(fe,{comment:w,status:s,type:n,parent:c,canOperate:v,commentNeedsReview:r,onShowConversation:i,ownerAuthorIsOrg:a,onLike:u,onReply:I,onFeature:S,onDelete:d,onCollapse:p,onDislike:h,onApprove:f,onReject:b,commentPattern:O,commentStatus:g,rootCommentId:z,byComment:k,isReverseAndStatusOpen:N,hasRecommend:F,showCollapsed:P},D)},D),V&&H.map((function(e){var t=e.id,o=e.featured,m=o?"".concat(t,"_featured"):"".concat(t),C=!o&&E.includes("".concat(t,"_featured"));return Object(l.b)("li",{className:"NestComment--child",children:Object(l.b)(fe,{comment:e,status:s,type:n,parent:c,canOperate:v,commentNeedsReview:r,onShowConversation:i,ownerAuthorIsOrg:a,onLike:u,onReply:I,onFeature:S,onDelete:d,onCollapse:p,onDislike:h,onApprove:f,onReject:b,commentPattern:O,commentStatus:g,rootCommentId:z,hasRecommend:C,showCollapsed:P},m)},m)})),q&&Object(l.b)(Ce,{comment:w,isFetching:U,onShowConversation:i,loadRestComments:this.loadRestComments})]})}}]),n}(m.Component),je=Object(b.compose)(Object(f.connect)(null,{loadConversation:O.h}))(ge);function ye(e){var t=e.id,n=e.replyTo,o=e.isConversation;if(e.isNotification)return{type:"notification"};if(o)return{type:"conversation"};if(!n)return{type:"comment"};var a=n.featured,c=n.replyToAuthor,r=n.id;return t===r&&a?c?{type:"replyToSubFeatured"}:{type:"replyToFeatured"}:t!==r||c?t!==r&&c?{type:"replyToSubCommon"}:{type:"comment"}:{type:"replyToCommon"}}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(i.a)(this,n)}}var ke=function(e){Object(r.a)(n,e);var t=Re(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={collapsed:!0,current:1},e.commentsWithPaginationElRef=Object(m.createRef)(),e.paginationZARef=Object(m.createRef)(),e.load=function(t,n,o){if(!e.props.isFetching&&!e.props.parent.adminClosedComment){var a=t||e.props,c=a.order,r=a.status,i=a.parent,s=i.id,l=i.type,m=a.commentPattern,u=a.needLoadCommentPermission,d=a.loadComments,p=a.notificationId,h=a.loadNotificationComments;if(p)return h(p);u&&e.loadCommentPermission(l,s),d(l,s,{order:c,isPrevious:n,commentPattern:m,status:o?"collapsed":r},o)}},e.addComment=function(t,n,o,a,c){var r=o.rootCommentId,i=o.isConversation,s=e.props,l=s.parent,m=l.id,u=l.type,d=s.commentId,p=s.addComment,h=s.notificationId;return p({parentType:u,parentId:m,content:t,replyTo:n,conversationId:d,rootCommentId:r,isConversation:i,notificationId:h,replyType:ye({id:r,replyTo:n,isConversation:i,isNotification:Boolean(h)}).type,useStrictMode:a,enableUnfriendlyCheck:c})},e.featureItem=function(t){(0,e.props.onItemFeature)(t,e.lastFeaturedIndex)},e.handleOpenCollapsed=function(){e.setState({collapsed:!1}),e.load(e.props,!1,!0)},e.trackPaginationClick=function(t,n){var o;o=n===t+1?{text:"下一页",block:{blockText:"CommentPageNext"}}:n===t-1?{text:"上一页",block:{blockText:"CommentPageBefore"}}:{text:"".concat(n),block:{blockText:"CommentPageSpecific"}},e.paginationZARef.current.trackEvent({eventType:"Click",elementLocation:Object.assign({type:"Button"},o)})},e.handlePageSelect=function(t){var n=e.props.onPaginationClick,o=e.state.current;e.trackPaginationClick(o,t),n&&n(o,t),e.commentsElement.scrollIntoView(),e.setState({current:t}),e.loadByPagination(t)},e.loadByPagination=function(t,n){var o=n||e.props,a=o.order,c=o.status,r=o.parent,i=r.id,s=r.type,l=o.commentPattern,m=o.needLoadCommentPermission,u=o.loadComments;m&&e.loadCommentPermission(s,i),u(s,i,{order:a,isPrevious:!1,status:c,commentPattern:l,current:t})},e.renderComment=function(t){var n=t.id,o=t.featured?"".concat(n,"_featured"):n,a=!e.state.collapsed;return Object(l.b)("ul",{className:"NestComment",children:Object(l.b)(je,Object.assign({comment:t,commentStatus:e.props.parent.commentStatus,onReply:e.addComment,onFeature:e.featureItem,showCollapsed:a},e.props))},o)},e.renderNormalComments=function(t){var n=e.state.collapsed,o=e.props,a=o.byComment,c=o.lastFeaturedIndex,r=o.parent,i=r.featuredCounts,s=r.commonCounts,m=[],u=i>0;return e.lastFeaturedIndex=0,t.length>0&&t.forEach((function(o,r){if(a||!o.collapsed){var d=t[r-1];o.collapsed&&(d&&d.collapsed||m.push(e.renderCollapsedDivider()),n)||(r===c&&m.push(Object(l.b)("div",{className:"NestComment-nextSiblings--noBorder"},"NestComment-nextSiblings--noBorder")),u&&0===r&&-1!==c&&m.push(Object(l.c)("div",{className:"CommentListV2-header-divider",children:["精选评论（",i,"）"]},"divider-featured")),m.push(e.renderComment(o)),r===c&&(e.lastFeaturedIndex=r,m.push(Object(l.c)("div",{className:"CommentListV2-header-divider",children:["评论（",s,"）"]},"divider-comment"))))}})),m},e.renderCollapsedComments=function(){var t=e.props,n=t.collapsedComments,o=t.isDrained,a=t.parent,c=(a=void 0===a?{}:a).collapsedCounts;return!o||c<=0?[]:n.map((function(t){return e.renderComment(t)}))},e.renderComments=function(t){return t.map(e.renderComment)},e.renderCollapsedDivider=function(){var t=e.props,n=t.isDrained,o=t.parent.collapsedCounts;return!n||o<=0?[]:e.state.collapsed?Object(l.b)("div",{className:"CommentListV2-action",children:Object(l.c)("div",{className:"CommentListV2-expendCollapseButton",children:[Object(l.c)("span",{role:"button",tabIndex:0,onClick:e.handleOpenCollapsed,children:[Object(N.formatNumber)(o)," 条评论被折叠"]}),"（",Object(l.b)("a",{href:"//www.zhihu.com/question/52029856/answer/128623557",target:"_blank",rel:"noopener noreferrer",children:"为什么？"}),"）"]})},"collapsed"):Object(l.c)("div",{className:"CommentListV2-divider",children:[Object(l.b)("div",{className:"CommentListV2-dividerLine"}),Object(l.c)("div",{className:"CommentListV2-dividerText",children:[Object(N.formatNumber)(o)," 条评论被折叠（",Object(l.b)("a",{href:"//www.zhihu.com/question/52029856/answer/128623557",target:"_blank",rel:"noopener noreferrer",children:"为什么？"}),"）"]})]},"divider-collapsed")},e.renderCollapsedInfiLoader=function(){var t=e.state.collapsed;if(t)return[];var n=e.props.collapsedInfo,o=void 0===n?{}:n,a=o.isFetching,c=void 0!==a&&a,r=o.isPrevDrained,i=void 0!==r&&r,s=o.isDrained,m=void 0!==s&&s;return Object(l.b)(R.b,{className:"CommentListV2",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:c,isPrevDrained:i,isDrained:m,onLoad:function(n){return e.load(e.props,n,!t)},placeholder:Object(l.b)(R.a,{className:"CommentItem",small:!0}),children:e.renderCollapsedComments()})},e.renderPatternContent=function(t){var n=e.props,o=n.isFetching,a=n.parent.adminClosedComment,c=n.byComment,r=n.status,i=n.order,s=n.totals,m=n.showPackupButton,u=n.handlePackupButton,d=Math.ceil(s/20),p=e.state.current;return a?null:o?Object(l.b)(M.a,{}):Object(l.c)("div",{ref:e.commentsWithPaginationElRef,children:[Object(l.b)("div",{className:"CommentListV2",children:"normal"===i&&"open"===r?e.renderNormalComments(t):e.renderComments(t)}),d>1&&Object(l.c)(y.e,{zaType:"Block",zaBlock:"CommentPagination",children:[Object(l.b)(y.d,{ref:e.paginationZARef}),Object(l.b)(k.a,{className:"CommentsV2-pagination",current:p,total:d,onSelect:e.handlePageSelect})]}),!c&&e.renderCollapsedDivider(),!c&&e.renderCollapsedInfiLoader(),m&&Object(l.b)(F.a,{onClick:u,commentsElRef:e.commentsWithPaginationElRef})]})},e.renderModalContent=function(t){var n=e.props,o=n.collapsedInfo,a=n.parent.adminClosedComment,c=n.status,r=n.order,i=n.byComment,s=e.state.collapsed,m=s?e.props:o,u=m.isFetching,d=void 0!==u&&u,p=m.isDrained,h=void 0!==p&&p,f=m.isPrevDrained,b=void 0!==f&&f;return h&&t.length<=0||a?Object(l.b)("div",{className:"CommentsV2-empty",children:Object(l.c)(B.k,{children:[Object(l.b)(B.e,{}),Object(l.b)("div",{children:"还没有评论"})]})}):Object(l.c)(R.b,{className:"CommentListV2",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:d,isPrevDrained:b,isDrained:h,onLoad:function(t){return e.load(e.props,t,!s)},placeholder:Object(l.b)(R.a,{className:"CommentItemV2",small:!0}),getContainer:function(e){return e},children:["normal"===r&&"open"===c?e.renderNormalComments(t):e.renderComments(t),!i&&e.renderCollapsedDivider(),!i&&e.renderCollapsedComments()]})},e.renderCommentEdit=function(){var t,n=e.props,o=n.parent,a=o.canComment,c=(a=void 0===a?{status:!0}:a).status,r=a.reason,i=o.author,s=(i=void 0===i?{isOrg:!1}:i).isOrg,m=o.type,u=o.id,d=o.adminClosedComment,p=o.commentStatus,h=o.questionType,f=o.brand,b=o.question,v=n.byComment,O=n.autoFocus,g=n.commentNeedsReview,j=n.zaInfo,y=n.showNotification,R=d?"当前内容暂时无法评论":r,k=O&&!v,N=p&&!1===p.canComment,w=null!==(t=Object(me.a)(m,b,f))&&void 0!==t?t:"";return c&&!d?Object(l.c)("div",{className:"CommentsV2-footer-wrapper",children:[Object(l.b)(x.a,{className:"CommentsV2-footer",type:m,id:u,commentNeedsReview:g,commentStatus:p,onSubmit:e.addComment,autoFocus:k,ownerAuthorIsOrg:s,ownerAuthorIsBrand:"commercial"===h,zaInfo:j,brandCommentText:w}),N&&Object(l.b)("div",Object.assign({},Object(z.a)((function(){y(p.toast,"red")}),{className:"CommentsV2-footer-disabled"})))]}):Object(l.b)("div",{className:C()("CommentsV2-disabledText"),children:Object(l.b)("div",{className:"CommentsV2-disabledReason",children:R})})},e}return Object(c.a)(n,[{key:"loadCommentPermission",value:function(e,t){var n=this.props,o=n.loadAnswerCommentPermission,a=n.loadArticleCommentPermission;switch(e){case"answer":return o(t);case"article":return a(t);default:return null}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.commentPattern,n=e.parent.adminClosedComment,o=e.stickers,a=e.loadStickers,c=e.getCommentWithPicPermission,r=e.commentWithPicPermission,i=e.currentUser;n||"bottom"!==t||this.loadByPagination(this.state.current),!o.length&&a(),void 0===r.commentWithPic&&i&&c()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.order,o=t.status,a=t.targetComment,c=t.commentPattern;n===e.order&&o===e.status||("bottom"===c?(this.setState({current:1}),this.loadByPagination(1,e)):this.load(e),this.setState({collapsed:!0}));var r=e.targetComment;r!==a&&r&&this.setState({collapsed:r.collapsed})}},{key:"componentWillUnmount",value:function(){Object(w.e)(w.b)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.comments,a=t.commentPattern,c=t.commentInputPosition,r=t.isAuthor,i=t.parent,s=i.author,m=(s=void 0===s?{isOrg:!1}:s).isOrg,u=i.commentPermission,d=i.reviewingCounts,p=i.commentCount,h=i.adminClosedComment,f=t.totals,b=t.status,v=t.order,O=t.onStatusChange,g=t.onOrderChange,j=t.targetLink,y=t.shouldReverse,R=t.permission.canBrandAdminEdit,k="censor"===u&&(r||R),N=k?{isCommentReviewer:k,onStatusChange:O,status:b,reviewingCounts:d}:{status:b};return Object(l.c)("div",{className:C()("CommentsV2 CommentsV2--withEditor",{"CommentsV2-withPagination":"bottom"===a},n),ref:function(t){e.commentsElement=t},children:[Object(l.b)(D.a,Object.assign({commentCount:void 0!==p?p:f,shouldReverse:y,commentClosed:h,targetLink:j,order:v,onOrderChange:g,commentPattern:a,isOrg:m},N)),"top"===c&&this.renderCommentEdit(),"bottom"===a?this.renderPatternContent(o):this.renderModalContent(o),"bottom"===c&&this.renderCommentEdit()]})}}]),n}(m.Component);ke.propTypes={type:p.a.string,parent:p.a.object.isRequired,targetLink:p.a.node,commentNeedsReview:p.a.bool,byComment:p.a.oneOfType([p.a.number,p.a.string]),commentPattern:p.a.string,commentInputPosition:p.a.oneOf(["top","bottom"]),showPackupButton:p.a.bool,handlePackupButton:p.a.func,onPaginationClick:p.a.func,autoFocus:p.a.bool,shouldReverse:p.a.bool},ke.defaultProps={commentInputPosition:"bottom",showPackupButton:!0,autoFocus:!0,shouldReverse:!0};var Ne=Object(b.compose)(Object(f.connect)((function(e,t){var n=t.parent,o=t.parent,a=o.type,c=o.id,r=t.status,i=t.order,s=t.byComment,l=t.commentPattern,m=t.notificationId,u=e.entities,d=e.commentsV2,p=d.conversation,h=d.stickers,f=void 0===h?[]:h,b=d.commentWithPicPermission,v=d.notificationsComments,C=d.parent,O=u.comments[s],g=d.pagination;"reviewing"===r&&(g=d.reviewing);var y="reverse"===i&&"open"===r;y&&(g=d.reverse);var R="".concat(a,"_").concat(c),k=[],N=d.collapsed[R]||{};N.ids&&N.ids.length>0&&(k=N.ids.map((function(e){return u.comments[e]}))),m&&(g=v,R=m);var w=g[R]||{isPrevDrained:!1,isFetching:!1,isDrained:!1,ids:[]},I=w.isFetching,S=w.isPrevDrained,z=w.isDrained,B=w.ids,A=w.newIds,T=void 0===A?[]:A,x=w.totals,M="bottom"!==l?B:T,D=M.map((function(e){return u.comments[e]})).map(L),F=j()(M,(function(e){return String(e).includes("_featured")}));return{currentUser:Object(E.b)(e),isFetching:I,isPrevDrained:S,isDrained:z,totals:m?D.length:x,collapsedInfo:N,collapsedComments:k,targetComment:O,conversation:p,entities:u,stickers:f,lastFeaturedIndex:F,comments:D,isReverseAndStatusOpen:y,commentWithPicPermission:b,ids:M,parent:Object.assign(Object.assign({},n),C[R]),permission:Object(P.cb)(e)}}),{loadComments:O.g,loadConversation:O.h,addComment:O.a,loadStickers:O.k,showNotification:w.h,clearNotification:w.e,getCommentWithPicPermission:O.f,loadNotificationComments:O.j,loadAnswerCommentPermission:I.o,loadArticleCommentPermission:S.c}),Object(A.a)())(ke),we=n(4),Ie=n(82),Se=n(142),Ee=n.n(Se),Pe=n(198),ze=n.n(Pe),Be=n(89),Ae=n(1576);function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(i.a)(this,n)}}var Le=function(e){Object(r.a)(n,e);var t=Te(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).load=function(){var t=e.props,n=t.isAnchorComments,o=t.conversationId;(0,t.loadConversation)({id:o,isAnchorComments:n})},e.addComment=function(t,n,o){var a=o.rootCommentId,c=o.isConversation,r=e.props,i=r.parent,s=i.type,l=i.id,m=r.conversationId,u=r.addComment,d=r.isAnchorComments;return u({parentType:s,parentId:l,content:t,replyTo:n,conversationId:m,rootCommentId:a,isConversation:c,replyType:ye({id:a,replyTo:n,isConversation:c}).type,isAnchorComments:d})},e.loadMoreAnchorComments=function(){var t=e.props,n=t.conversationId,o=t.topCommentsPaging,a=void 0===o?{}:o;(0,t.loadMoreAnchorComments)({conversationId:n,nextUrl:a.next})},e.createOnRef=Ee()((function(t){return function(n){var o=e.props.byComment;n&&o&&String(t)===String(o)&&(e.byCommentNode=n)}})),e.scrollToTarget=function(){var t=Object(Ie.a)(e),n=t.byCommentNode,o=t.listEl;if(o&&n){var a=n.getBoundingClientRect(),c=a.top,r=a.height,i=o.getBoundingClientRect(),s=i.top,l=i.height;e.listEl.scrollTop+=c-s-(l-r)/2,n.classList.add("CommentItemV2--highlighted"),setTimeout((function(){return n.classList.remove("CommentItemV2--highlighted")}),2e3),n.tabIndex=-1,n.focus()}},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.byComment&&this.scrollToTarget()}},{key:"componentDidUpdate",value:function(e){!e.comments.length&&this.props.comments.length&&this.props.byComment&&this.scrollToTarget()}},{key:"render",value:function(){var e=this,t=this.props,n=t.onItemLike,o=t.onItemDelete,a=t.onItemFeature,c=t.onItemApprove,r=t.onItemCollapse,i=t.onItemDislike,s=t.onNavBack,u=t.canOperateItem,d=t.isFetching,p=t.comments,h=void 0===p?[]:p,f=t.commentNeedsReview,b=t.openComment.collapsed,v=t.parent,C=t.commentPattern,O=t.totals,g=t.isDrained,j=t.isPrevDrained,y=t.isConversationMoreFetching,k=t.isConversationMoreDrained,N=t.offsetIndex,w=null;return d&&!h.length?w=Object(l.c)(l.a,{children:[Object(l.b)(R.a,{className:"CommentItemV2",small:!0}),Object(l.b)("div",{className:"CommentsV2-openComment-divider"}),Object(l.b)("div",{className:"CommentsV2-replyNum",children:"".concat(O," 条回复")})]}):h.length&&(w=h.map((function(t,s){return s?k||s!==N||y?y&&s===N?Object(l.c)(m.Fragment,{children:[Object(l.b)(fe,{onRef:e.createOnRef(t.id),isConversation:!0,commentNeedsReview:f,canOperate:u,parent:v,comment:t,onLike:n,onDelete:o,onFeature:a,onApprove:c,onCollapse:r,onDislike:i,collapsedShown:b,onReply:e.addComment},t.id),Object(l.b)(R.a,{className:"NestCoomment-moreCommentButton ",small:!0},"NestCoomment-moreCommentButton-PlaceHolder")]},t.id):Object(l.b)(fe,{onRef:e.createOnRef(t.id),isConversation:!0,commentNeedsReview:f,canOperate:u,parent:v,comment:t,onLike:n,onDelete:o,onFeature:a,onApprove:c,onCollapse:r,onDislike:i,collapsedShown:b,onReply:e.addComment},t.id):Object(l.c)(m.Fragment,{children:[Object(l.b)(fe,{onRef:e.createOnRef(t.id),isConversation:!0,commentNeedsReview:f,canOperate:u,parent:v,comment:t,onLike:n,onDelete:o,onFeature:a,onApprove:c,onCollapse:r,onDislike:i,collapsedShown:b,onReply:e.addComment},t.id),Object(l.c)("div",{role:"button",tabIndex:0,preset:"plain",className:"NestCoomment-moreCommentButton",onClick:e.loadMoreAnchorComments,children:[Object(l.b)(Ae.a,{}),Object(l.b)("p",{children:"点击查看更多回复"})]},"NestCoomment-moreCommentButton")]},t.id):Object(l.c)(m.Fragment,{children:[Object(l.b)("div",{className:"CommentsV2-openComment",children:Object(l.b)(fe,{onRef:e.createOnRef(t.id),isConversation:!0,commentNeedsReview:f,canOperate:u,parent:v,comment:t,onLike:n,onDelete:o,onFeature:a,onApprove:c,onCollapse:r,onDislike:i,collapsedShown:b,onReply:e.addComment},t.id)}),Object(l.b)("div",{className:"CommentsV2-openComment-divider"}),Object(l.b)("div",{children:Object(l.b)("div",{className:"CommentsV2-replyNum",children:"".concat(O," 条回复")})},"".concat(t.id,"-title"))]},t.id)}))),"bottom"===C?Object(l.b)(Be.b,{size:"fullPage",onClose:s,children:Object(l.c)("div",{className:"CommentsV2",children:[Object(l.b)(D.a,{isConversation:!0,commentPattern:C}),Object(l.b)(R.b,{className:"CommentListV2",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:d,isDrained:g,isPrevDrained:j,onLoad:this.load,placeholder:Object(l.b)(R.a,{className:"CommentItemV2",small:!0}),getContainer:function(e){return e},children:w})]})}):Object(l.c)("div",{className:"CommentsV2",children:[Object(l.b)(D.a,{isConversation:!0,onNavBack:s}),Object(l.b)(R.b,{className:"CommentListV2",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:d,isDrained:g,isPrevDrained:j,onLoad:this.load,placeholder:Object(l.b)(R.a,{className:"CommentItemV2",small:!0}),getContainer:function(e){return e},children:w})]})}}]),n}(m.Component);Le.propTypes={conversationId:p.a.oneOfType([p.a.number,p.a.string]),type:p.a.string,parent:p.a.object.isRequired,commentNeedsReview:p.a.bool};var xe=Object(b.compose)(Object(f.connect)((function(e,t){var n=t.conversationId,o=t.isAnchorComments,a=e.entities.comments,c=e.commentsV2,r=c.conversation,i=c.conversationMore,s=r[n]||{isFetching:!1,isDrained:!1,isPrevDrained:!1,ids:[]},l=s.isFetching,m=s.isDrained,u=s.isPrevDrained,d=s.ids,p=s.totals,h=s.topComments,f=(h=void 0===h?{}:h).paging,b=(f||{}).isEnd,v=i[n]||{isFetching:!1,isDrained:!1,ids:[]},C=v.isFetching,O=v.isDrained,g=v.ids,j=g.map((function(e){return a[e]})),y=d.map((function(e){return a[e]})),R=a["".concat(n,"_featured")]||a[n]||{};return{isFetching:l,isDrained:m,isPrevDrained:u,totals:p,comments:o?ze()(g.length?[].concat(Object(we.a)(y.slice(0,4)),Object(we.a)(j),Object(we.a)(y.slice(4))):y,"id"):[R].concat(Object(we.a)(y)),openComment:R,topCommentsPaging:f,isConversationMoreFetching:C,isConversationMoreDrained:b||O,offsetIndex:f?[].concat(Object(we.a)(y.slice(0,3)),Object(we.a)(j)).length:-1}}),{loadConversation:O.h,addComment:O.a,loadMoreAnchorComments:O.i}))(Le),Me=n(439),De=n(224),Fe=["className","containerClassName","parent","commentPattern","type","parent","needLoadCommentPermission","currentUser"];function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(i.a)(this,n)}}var _e=function(e){Object(r.a)(n,e);var t=Ve(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={openedCommentId:e.props.byComment,isAnchorComments:Boolean(e.props.byComment),status:"open",order:"normal"},e.commentsContainerRef=Object(m.createRef)(),e.showConversation=function(t){var n=t.commentId,o=t.isAnchorComments;e.setState({openedCommentId:n,isAnchorComments:o})},e.showComments=function(){var t=e.props,n=t.byComment,o=t.router;n&&o.replace("".concat(location.pathname).concat(location.search)),e.setState({openedCommentId:null,isAnchorComments:!1})},e.delete=function(t){var n=e.props,o=n.parent;return(0,n.deleteComment)(t,o.type,o.id)},e.feature=function(t){var n=e.props,o=n.parent,a=n.updateCommentFeatureStatus,c=n.notificationId;a({id:e.state.openedCommentId,commentId:t,parentId:o.id,parentType:o.type,notificationId:c})},e.like=function(t,n){var o=e.props,a=o.onItemLike,c=o.updateCommentLikeStatus;a&&a(t,n),c(t)},e.collapse=function(t){var n=e.props,o=n.parent;(0,n.updateCommentCollapsed)(t,o.type,o.id)},e.dislike=function(t){(0,e.props.updateCommentDisliked)(t)},e.approve=function(t){var n=e.props,o=n.parent,a=n.type;(0,n.approveComment)(t,o.type||a,o.id)},e.reject=function(t){var n=e.props,o=n.parent,a=n.type;(0,n.rejectComment)(t,o.type||a,o.id)},e.handleStatusChange=function(t){e.setState({status:t})},e.handleOrderChange=function(t,n){var o=e.props.onOrderChange;o&&o(t,n),e.setState({order:t})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.onMount;e&&e(this.commentsContainerRef.current)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.containerClassName,a=e.parent,c=e.commentPattern,r=e.type,i=e.parent,s=(i=void 0===i?{}:i).commentPermission,m=i.relationship,u=void 0===m?{}:m,d=i.author,p=void 0===d?{}:d,h=e.needLoadCommentPermission,f=e.currentUser,b=Object(o.default)(e,Fe),v="string"==typeof p?p:p.urlToken,O=void 0===u.isAuthor?f&&v&&f.urlToken===v:u.isAuthor,g="censor"===s&&!O,j="answer"===r||"article"===r,y=this.state,R=y.openedCommentId,k=y.isAnchorComments,N=y.status,w=y.order,I=R,S=Boolean(R&&"bottom"!==c);return Object(l.c)("div",{className:C()("Comments-container",n),ref:this.commentsContainerRef,children:[Object(l.b)(Ne,Object.assign(Object.assign({className:C()(t,{"CommentsV2--hidden":S})},b),{},{type:r,order:w,status:N,parent:a,commentPattern:c,commentNeedsReview:g,canOperateItem:j,onShowConversation:this.showConversation,onItemLike:this.like,onItemFeature:this.feature,onItemDelete:this.delete,onItemCollapse:this.collapse,onItemDislike:this.dislike,onItemApprove:this.approve,onItemReject:this.reject,byComment:I,onStatusChange:this.handleStatusChange,onOrderChange:this.handleOrderChange,needLoadCommentPermission:h,isAuthor:O})),R&&Object(l.b)(xe,Object.assign(Object.assign({},b),{},{parent:a,type:r,canOperateItem:j,onItemLike:this.like,onItemFeature:this.feature,onItemDelete:this.delete,onItemCollapse:this.collapse,onItemDislike:this.dislike,onItemApprove:this.approve,onItemReject:this.reject,commentPattern:c,conversationId:R,onNavBack:this.showComments,byComment:I,isAnchorComments:k,commentNeedsReview:g,onShowConversation:this.showConversation}))]})}}]),n}(m.Component);_e.propTypes={type:p.a.string.isRequired,parent:p.a.object.isRequired,onOrderChange:p.a.func,onItemLike:p.a.func,isAuthor:p.a.bool,onMount:p.a.func},_e.defaultProps={type:"answer"};t.default=Object(b.compose)(Object(Me.a)(null),h.withRouter,De.a,Object(f.connect)(null,{updateCommentLikeStatus:O.p,updateCommentFeatureStatus:O.o,deleteComment:O.e,updateCommentCollapsed:O.m,updateCommentDisliked:O.n,approveComment:O.b,rejectComment:O.l}))(_e)},2897:function(e,t,n){"use strict";n.r(t);var o,a=n(32),c=n(14),r=n(15),i=n(17),s=n(18),l=n(8),m=n(1),u=n(3),d=n.n(u),p=n(20),h=n(0),f=n(21),b=n(13),v=n.n(b),C=n(502),O=n(26),g=n(70),j=n(142),y=n.n(j),R=n(897),k=n(289),N=n(435),w=n(1071),I=n(34),S=n(149),E=n(382),P=n(1240),z=n(31),B=n(90),A=n(473),T=n(913),L=n(172),x=n(4),M=n(82),D=n(49),F=n(223),V=n.n(F),_=n(41),H=n.n(_),q=n(89),U=n(30),G=n(221),W=n(258),Z=n(477),Y=n(62);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(s.a)(this,n)}}var J=function(){return""},X=function(e){Object(i.a)(n,e);var t=K(n);function n(e){var o;return Object(c.a)(this,n),(o=t.call(this,e)).initLocalComment=function(){var e=o.props,t=e.type,n=e.id;if(t&&n){var a=H.a.get("zhihu::comment_local_key")||[],c="".concat(t,"_").concat(n),r=a.find((function(e){return e.key===c})),i=r&&r.value;i&&o.setState({value:{toHTML:function(){return i}},hasNoContent:!1})}},o.saveLocalComment=function(e){var t=o.props,n=t.type,a=t.id;if(n&&a){var c=e?e.toHTML():o.state.value.toHTML(),r="".concat(n,"_").concat(a),i=(H.a.get("zhihu::comment_local_key")||[]).filter((function(e){return e.key!==r})),s=c?[].concat(Object(x.a)(i.slice(0,4)),[{key:r,value:c}]):i;H.a.set("zhihu::comment_local_key",s)}},o.handleChange=function(e){o.setState({value:e,hasNoContent:e.isEmpty})},o.handleCommentShow=o.props.authRequired((function(){o.setState({shown:!0}),o.hiddenInput.focus()})),o.handleCommentHide=function(){o.setState({shown:!1})},o.handleMobileComment=function(){o.onSubmit(),o.handleCommentHide()},o.focusInput=function(e){e.preventDefault(),o.input.focus()},o.onChange=o.handleChange.bind(Object(M.a)(o)),o.onFocus=o.handleFocus.bind(Object(M.a)(o)),o.onBlur=o.handleBlur.bind(Object(M.a)(o)),o.onSubmit=o.props.authRequired(o.handleSubmit.bind(Object(M.a)(o)),void 0,z.b),o.state={active:e.defaultActive,hasNoContent:!0,submitting:!1,shown:!1,value:{toHTML:J}},o}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.initLocalComment()}},{key:"componentWillUnmount",value:function(){this.saveLocalComment()}},{key:"handleFocus",value:function(){this.setState({active:!0})}},{key:"handleBlur",value:function(){var e=this;setTimeout((function(){return e.setState({active:!1})}),100)}},{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.replyTo,o=t.onSubmit,a=t.onCancel,c=this.state.submitting,r=this.input.toHTML();if(r&&o&&!c){this.setState({submitting:!0}),this.saveLocalComment();var i=o(r,n);i.then?i.then((function(){a&&a(),e.input?(e.input.reset(),e.setState({value:{toHTML:J}},(function(){return e.saveLocalComment()}))):e.saveLocalComment({toHTML:J})})).finally((function(){e.setState({submitting:!1})})):(this.setState({submitting:!1}),a&&a(),this.input.reset()),O.a.trackEvent(this,{action:"Comment",element:"Button"})}}},{key:"renderInput",value:function(e){var t=this,n=e.placeholder,o=e.className,a=this.props.autoFocus;return Object(m.c)(h.Fragment,{children:[Object(m.b)(W.c,{keyMap:{FOCUS_COMMENT_INPUT:"shift+c"},handlers:{FOCUS_COMMENT_INPUT:this.focusInput}}),Object(m.b)(Z.a,{className:v()("CommentEditor-input",o),defaultValue:this.state.value.toHTML(),allowMention:!0,allowPasteRichText:!1,autoFocus:Boolean(!1)||a,outputBlockType:"div",ref:function(e){t.input=e},placeholder:n,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onSubmit:this.onSubmit,minRows:5})]})}},{key:"render",value:function(){var e=this.props,t=e.replyTo,n=e.commentNeedsReview,a=e.className,c=(e.onClick,e.onCancel),r=e.ownerAuthorIsOrg,i=e.ownerAuthorIsBrand,s=(e.type,e.id,e.shouldOia,e.preset,e.brandCommentText),l=void 0===s?"":s,u=e.commentStatus,d=this.state,p=d.active,h=d.hasNoContent,f=d.submitting,b=r?"机构":"作者",C={preset:"primary",color:"blue",children:"评论",disabled:h||f};if(t){var O=V()(o||(o=Object(L.a)(["回复","",""])),t.author.member.name,n?"，评论由".concat(b,"筛选后公开"):"");return Object(m.c)("div",{className:v()(a,"CommentEditor--inCommentItem",{"CommentEditor--active":p||!h}),children:[this.renderInput({placeholder:O}),Object(m.c)("div",{className:"CommentEditor-actions",children:[Object(m.b)(I.c,{preset:"plain",onClick:c,children:"取消"}),Object(m.b)(I.c,Object.assign(Object.assign({},C),{},{onClick:this.onSubmit}))]})]})}var g="写下你的评论...";n&&(g=i&&l?l:r?"已开启预审评论，评论由机构筛选后公开":"评论由作者筛选后显示"),u&&!1===u.canComment&&(g=u.toast);v()(a,"CommentEditor--normal"),this.state.shown;return Object(m.c)("div",{className:v()(a,"CommentEditor--normal",{"CommentEditor--active":p||!h}),children:[this.renderInput({placeholder:g}),Object(m.b)(I.c,Object.assign(Object.assign({},C),{},{className:"CommentEditor-singleButton",onClick:this.onSubmit}))]})}}]),n}(h.Component);X.defaultProps={defaultActive:!1,replyTo:null,inCommentItem:!1,autoFocus:!0,ownerAuthorIsOrg:!1,ownerAuthorIsBrand:!1},X.propTypes={className:d.a.string,defaultActive:d.a.bool,replyTo:d.a.object,inCommentItem:d.a.bool,commentNeedsReview:d.a.bool,canComment:d.a.object,onCancel:d.a.func,onSubmit:d.a.func.isRequired};var Q=Object(p.compose)(D.withRouter,G.a,Object(f.connect)((function(e){return{shouldOia:Object(Y.h)(e)}})))(X),$=n(1161),ee=n(1584),te=n(2281),ne=n(1082),oe=n(892),ae=n(2617),ce=n(878),re=n(1336),ie=n(893),se=(n(132),n(1228),n(152)),le=n(1069),me=n(946),ue=n(935),de=n(120),pe=n(525),he=n(298),fe=n(1068);function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(s.a)(this,n)}}var ve=function(e){Object(i.a)(n,e);var t=be(n);function n(){var e;Object(c.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={reportModalShown:!1,isReplying:!1,collapsed:!0,guideShown:!1},e.getRedirectUrl=function(){var t=e.props.parent;switch(t.type){case"answer":return"/question/".concat(t.question.id,"/answer/").concat(t.id);case"article":return"https://zhuanlan.zhihu.com/p/".concat(t.id);default:return""}},e.like=e.props.authRequired((function(t){var n=e.props;(0,n.onLike)(n.comment.id,t)}),U.Y.like,z.b),e.dislike=e.props.authRequired((function(){var t=e.props;(0,t.onDislike)(t.comment.id)}),U.Y.like,z.b),e.delete=function(){var t=e.props;(0,t.onDelete)(t.comment.id)},e.feature=function(){var t=e.props;(0,t.onFeature)(t.comment.id)},e.collapse=function(){var t=e.props;(0,t.onCollapse)(t.comment.id)},e.approve=function(){var t=e.props;(0,t.onApprove)(t.comment.id)},e.showConversation=function(){var t=e.props;(0,t.onShowConversation)(t.comment.id)},e.startReply=e.props.authRequired((function(){var t=e.props,n=t.commentStatus,o=t.showNotification;n&&!1===n.canReply?o(n.toast,"red",z.b):e.setState({isReplying:!0})}),void 0,z.b),e.stopReply=function(){e.setState({isReplying:!1})},e.openReportModal=e.props.authRequired((function(){e.setState({reportModalShown:!0})})),e.closeReportModal=function(t){if(t){var n=t.result.payload,o=n&&n.message||n&&n.code&&"举报失败";t.commentDeleteResult&&!(t.commentDeleteResult.payload||{}).code?le.b.showModal({reportText:o}):Object(de.b)(o||"举报成功")}e.setState({reportModalShown:!1})},e.handleExpand=function(){e.setState({collapsed:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.handleDelete=function(){return e.setState({deleteModal:!0})},e.handleCloseDelete=function(){return e.setState({deleteModal:!1})},e}return Object(r.a)(n,[{key:"renderRoleInfo",value:function(e,t){return"normal"===e?null:Object(m.b)("span",{className:"CommentItem-roleInfo",children:"ancestor"===e||"author"===e&&"question"===t?" (提问者) ":" (作者) "})}},{key:"renderReplyTo",value:function(){var e=this.props.comment,t=e.replyToAuthor,n=e.resourceType;if(!t)return null;var o=t.member,a=void 0===o?{}:o,c=t.role;return Object(m.c)("span",{children:[Object(m.b)("span",{className:"CommentItem-reply",children:"回复"}),Object(m.b)(ue.a,{className:v()({"CommentItem-userLink":!1}),noBadge:!0,noHoverCard:!0,user:a}),this.renderRoleInfo(c,n)]})}},{key:"renderInner",value:function(){var e=this,t=this.props,n=t.comment,o=n.isDelete,a=n.collapsed,c=t.isConversation,r=t.ownerAuthorIsOrg;if(o)return c?Object(m.b)("div",{className:"CommentItem-deletedContent",children:"这里有一条已删除的评论"}):null;if(a&&c&&this.state.collapsed)return Object(m.c)("div",{className:"CommentItem-deletedContent",children:["这里有一条已折叠的评论，",Object(m.b)(I.c,{preset:"plain",onClick:this.handleExpand,children:"查看"})]});var i,s=this.state,l=s.reportModalShown,u=s.isReplying,d=this.props,p=d.parent,h=p.canComment,f=(h=void 0===h?{status:!0}:h).status,b=p.questionType,C=d.commentNeedsReview,O=d.comment,g=d.onReply,j=d.status,y=d.type,R=d.canOperate,k=d.commentPattern,N=d.isMobile,w=O.id,S=O.author,E=O.content,P=O.voteCount,z=O.replyToAuthor,B=O.isAuthor,A=O.isParentAuthor,T=O.createdTime,L=O.featured,x=O.voting,M=O.reviewing,D=O.disliked,F=O.resourceType,V=O.collapsedReason,_=void 0===V?"":V,H=S||{},q=H.member,U=H.role;if(u)i=Object(m.b)(Q,{type:"comment",id:w,commentNeedsReview:C,className:"CommentItem-editor",defaultActive:!0,replyTo:O,onCancel:this.stopReply,onSubmit:g});else if("reviewing"===j)i=Object(m.c)("div",{className:"CommentItem-footer",children:[Object(m.c)(I.c,{preset:"plain",onClick:this.approve,children:[Object(m.b)($.a,{style:{marginRight:5},center:!0,size:14}),"公开"]}),Object(m.c)(I.c,{className:v()({"CommentItem-hoverBtn":!0}),preset:"plain",onClick:this.handleDelete,children:[Object(m.b)(ee.a,{style:{marginRight:5},center:!0,size:16}),"删除"]})]});else{var G=B||A&&("question"!==y||"commercial"===b);i=Object(m.c)("div",{className:v()("CommentItem-footer",{"CommentItem-mobileFooter":!1}),children:[Object(m.c)(I.c,{className:v()("CommentItem-likeBtn",x&&"is-liked"),preset:"plain",onClick:this.like,disabled:B||!f,children:[Object(m.b)(te.a,{style:{marginRight:5},center:!0,size:16}),P>0?P:"赞"]}),a&&_&&Object(m.c)("div",{className:"CommentItem-walleTag",children:["阴阳怪气自动折叠"===_&&Object(m.b)(ne.a,{size:16,className:"CommentItem-walleIcon"}),_]}),!c&&z&&Object(m.c)(I.c,{preset:"plain",className:"CommentItem-talkBtn",onClick:this.showConversation,children:[Object(m.b)(oe.a,{style:{marginRight:5},center:!0,size:16}),"查看对话"]}),!c&&!B&&f&&!a&&Object(m.c)(I.c,{preset:"plain",className:v()({"CommentItem-hoverBtn":!0}),onClick:this.startReply,children:[Object(m.b)(ae.a,{style:{marginRight:5},center:!0,size:16}),"回复"]}),A&&R&&!N&&Object(m.c)(I.c,{className:v()({"CommentItem-hoverBtn":!B}),preset:"plain",onClick:this.feature,children:[Object(m.b)(ce.a,{style:{marginRight:5},center:!0,size:16}),L?"取消推荐":"推荐"]}),A&&R&&!N&&Object(m.c)(I.c,{className:v()({"CommentItem-hoverBtn":!B}),preset:"plain",onClick:this.collapse,children:[Object(m.b)(re.a,{style:{marginRight:5},center:!0,size:14}),a?"取消折叠":"折叠"]}),!A&&!B&&R&&!N&&Object(m.c)(I.c,{className:v()({"CommentItem-hoverBtn":!0}),preset:"plain",onClick:this.dislike,children:[Object(m.b)(te.a,{style:{transform:"rotate(180deg)",marginRight:5},size:16,center:!0}),D?"取消踩":"踩"]}),B||Object(m.c)(I.c,{className:v()({"CommentItem-hoverBtn":!0}),preset:"plain",onClick:this.openReportModal,children:[Object(m.b)(ie.a,{style:{marginRight:5},center:!0,size:16}),"举报"]}),G&&Object(m.c)(I.c,{className:v()({"CommentItem-hoverBtn":!B}),preset:"plain",onClick:this.handleDelete,children:[Object(m.b)(ee.a,{style:{marginRight:5},center:!0,size:16}),"删除"]}),!1,!1,Object(m.b)(le.a,{shown:this.state.deleteModal,id:w,onDelete:this.delete,onClose:this.handleCloseDelete}),Object(m.b)(he.a,Object.assign(Object.assign({type:"comment",urlToken:w,shown:l,onClose:this.closeReportModal},G&&{onDeleteComment:function(){return e.props.onDelete(w)}}),{},{notification:{failure:pe.a},zaEnabled:!0}))]})}return Object(m.c)("div",{children:[Object(m.c)("div",{className:"CommentItem-meta",children:[q&&Object(m.b)(me.a,{className:"CommentItem-avatar",noHoverCard:"fixed"===k,user:q}),q&&Object(m.b)(ue.a,{className:v()({"CommentItem-userLink":!1}),noBadge:!0,noHoverCard:!0,user:q}),this.renderRoleInfo(U,F),this.renderReplyTo(),M&&Object(m.b)(re.a,{className:"CommentItem-reviewing","data-tooltip":"".concat(!1===r?"评论未公开，由作者筛选后显示":"已开启预审评论，评论由机构筛选后公开"),"aria-label":"".concat(!1===r?"评论未公开，由作者筛选后显示":"已开启预审评论，评论由机构筛选后公开"),center:!0,size:14}),Object(m.b)("span",{className:"CommentItem-time",children:Object(se.toRelativeString)(T)})]}),Object(m.b)(fe.a,{className:"CommentItem-content",html:E}),i]})}},{key:"render",value:function(){var e=this.renderInner(),t=this.props,n=t.parent;n.type,n.id,t.isWechat;return e&&Object(m.c)("div",{className:"CommentItem",ref:this.props.onRef,children:[e,!1]})}}]),n}(h.PureComponent);ve.propTypes={comment:d.a.object.isRequired,parent:d.a.object.isRequired,commentNeedsReview:d.a.bool,type:d.a.string,isConversation:d.a.bool,onLike:d.a.func.isRequired,onShowConversation:d.a.func,onReply:d.a.func,onFeature:d.a.func,onDelete:d.a.func.isRequired,onCollapse:d.a.func,commentPattern:d.a.string,isMobile:d.a.bool};var Ce=Object(p.compose)(D.withRouter,G.a,Object(f.connect)((function(e){return{isWechat:e.env.userAgent.Wechat,shouldSpecialOia:Object(Y.i)(e)}}),{showNotification:z.h}))(ve),Oe=n(1773),ge=n(1323),je=n(1774),ye=n(1457);function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(s.a)(this,n)}}function ke(e,t){switch(e){case"answer":return Object(B.o)(t);case"article":return Object(A.c)(t);default:return null}}var Ne=function(e){Object(i.a)(n,e);var t=Re(n);function n(){var e;Object(c.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={collapsed:!0,current:1},e.commentsWithPaginationElRef=Object(h.createRef)(),e.paginationZARef=Object(h.createRef)(),e.load=function(t,n,o){if(!e.props.isFetching&&!e.props.parent.adminClosedComment){var a=t||e.props,c=a.order,r=a.byComment,i=a.status,s=a.parent,l=s.id,m=s.type,u=a.dispatch,d=a.commentPattern;if(a.needLoadCommentPermission&&ke(m,l)&&u(ke(m,l)),o){u(Object(C.e)(m,l,{order:c,isPrevious:n,byComment:r,status:"collapsed",commentPattern:d},!0))}else u(Object(C.e)(m,l,{order:c,isPrevious:n,byComment:r,status:i,commentPattern:d}))}},e.addComment=function(t,n){var o=e.props,a=o.parent,c=a.id,r=a.type,i=o.dispatch,s=[r,c,t];return n&&(s[3]=n.id),i(C.a.apply(void 0,s))},e.featureItem=function(t){e.props.onItemFeature(t,e.lastFeaturedIndex)},e.handleOpenCollapsed=function(){e.setState({collapsed:!1}),e.load(e.props,!1,!0)},e.createOnRef=y()((function(t){return function(n){var o=e.props.byComment;t===Number(o)&&(e.targetCommentEl=n)}})),e.trackPaginationClick=function(t,n){var o;o=n===t+1?{text:"下一页",block:{blockText:"CommentPageNext"}}:n===t-1?{text:"上一页",block:{blockText:"CommentPageBefore"}}:{text:"".concat(n),block:{blockText:"CommentPageSpecific"}},e.paginationZARef.current.trackEvent({eventType:"Click",elementLocation:Object.assign({type:"Button"},o)})},e.handlePageSelect=function(t){var n=e.props.onPaginationClick,o=e.state.current;e.trackPaginationClick(o,t),n&&n(o,t),e.commentsElement.scrollIntoView(),e.setState({current:t}),e.loadByPagination(t)},e.loadByPagination=function(t,n){var o=n||e.props,a=o.order,c=o.byComment,r=o.status,i=o.parent,s=i.id,l=i.type,m=o.dispatch,u=o.commentPattern;o.needLoadCommentPermission&&ke(l,s)&&m(ke(l,s)),m(Object(C.e)(l,s,{order:a,isPrevious:!1,byComment:c,status:r,commentPattern:u,current:t}))},e.renderComment=function(t){var n=e.props,o=n.parent,a=o.type,c=o.author,r=(c=void 0===c?{isOrg:!1}:c).isOrg,i=n.isMobile,s=n.parent,l=n.commentNeedsReview,u=n.onShowConversation,d=n.status,p=n.onItemLike,h=n.onItemDelete,f=n.onItemCollapse,b=n.onItemDislike,v=n.onItemApprove,C=n.canOperateItem,O=n.commentPattern;return Object(m.b)(Ce,{isMobile:i,comment:t,onRef:e.createOnRef(t.id),status:d,type:a,parent:s,canOperate:C,commentNeedsReview:l,onShowConversation:u,ownerAuthorIsOrg:r,onLike:p,onReply:e.addComment,onFeature:e.featureItem,onDelete:h,onCollapse:f,onDislike:b,onApprove:v,commentPattern:O,commentStatus:s.commentStatus},t.id)},e.renderNormalComments=function(t){var n=e.state.collapsed,o=e.props.byComment,a=[];if(e.lastFeaturedIndex=0,t.length>0){var c=t[0].featured,r=!1;t.forEach((function(i,s){if(o||!i.collapsed){var l=t[s-1];if(!i.collapsed||(l&&l.collapsed||a.push(e.renderCollapsedDivider()),!n)){a.push(e.renderComment(i));var u=t[s+1];c&&!r&&i.featured&&(!u||!u.featured)&&(r=!0,e.lastFeaturedIndex=s,a.push(Object(m.c)("div",{className:"CommentList-divider",children:[Object(m.b)("div",{className:"CommentList-dividerLine"}),Object(m.c)("div",{className:"CommentList-dividerText",children:["以上为精选评论",Object(m.b)(R.a,{className:"CommentList-questionMark","data-tooltip":"精选评论包含回答作者推荐的评论和部分高赞评论","aria-label":"精选评论包含回答作者推荐的评论和部分高赞评论",center:!0,size:16})]})]},"divider-featured")))}}}))}return a},e.renderCollapsedComments=function(){var t=[],n=e.props.collapsedComments;return e.state.collapsed||!n||n.length<=0?[]:(t.push(n.map((function(t){return e.renderComment(t)}))),t)},e.renderComments=function(t){return t.map(e.renderComment)},e.renderCollapsedDivider=function(){var t=e.props,n=t.isDrained,o=t.parent.collapsedCounts;return!n||o<=0?[]:e.state.collapsed?Object(m.b)("div",{className:"CommentList-action",children:Object(m.c)("div",{className:"CommentList-expendCollapseButton",children:[Object(m.c)("span",{role:"button",tabIndex:0,onClick:e.handleOpenCollapsed,children:[Object(S.formatNumber)(o)," 条评论被折叠"]}),"（",Object(m.b)("a",{href:"//www.zhihu.com/question/52029856/answer/128623557",target:"_blank",rel:"noopener noreferrer",children:"为什么？"}),"）"]})},"collapsed"):Object(m.c)("div",{className:"CommentList-divider",children:[Object(m.b)("div",{className:"CommentList-dividerLine"}),Object(m.c)("div",{className:"CommentList-dividerText",children:[Object(S.formatNumber)(o)," 条评论被折叠（",Object(m.b)("a",{href:"//www.zhihu.com/question/52029856/answer/128623557",target:"_blank",rel:"noopener noreferrer",children:"为什么？"}),"）"]})]},"divider-collapsed")},e.renderCollapsedInfiLoader=function(){var t=e.state.collapsed;if(t)return[];var n=e.props.collapsedInfo,o=(n=void 0===n?{}:n).isFetching,a=n.isPrevDrained,c=n.isDrained;return Object(m.b)(N.b,{className:"CommentList",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:o,isPrevDrained:a,isDrained:c,onLoad:function(n){return e.load(e.props,n,!t)},placeholder:Object(m.b)(N.a,{className:"CommentItem",small:!0}),children:e.renderCollapsedComments()})},e.renderPatternContent=function(t){var n=e.props,o=n.isFetching,a=n.parent.adminClosedComment,c=n.byComment,r=n.status,i=n.order,s=n.totals,l=n.showPackupButton,u=n.handlePackupButton,d=Math.ceil(s/20),p=e.state.current;return a?null:o?Object(m.b)(Oe.a,{}):Object(m.c)("div",{ref:e.commentsWithPaginationElRef,children:[Object(m.b)("div",{className:"CommentList",children:"normal"===i&&"open"===r?e.renderNormalComments(t):e.renderComments(t)}),d>1&&Object(m.c)(g.e,{zaType:"Block",zaBlock:"CommentPagination",children:[Object(m.b)(g.d,{ref:e.paginationZARef}),Object(m.b)(w.a,{className:"comments-pagination",current:p,total:d,onSelect:e.handlePageSelect})]}),!c&&e.renderCollapsedDivider(),!c&&e.renderCollapsedInfiLoader(),l&&Object(m.b)(je.a,{onClick:u,commentsElRef:e.commentsWithPaginationElRef})]})},e.renderModalContent=function(t){var n=e.props,o=n.collapsedInfo,a=n.parent.adminClosedComment,c=n.status,r=n.order,i=n.byComment,s=e.state.collapsed,l=s?e.props:o,u=l.isFetching,d=l.isDrained,p=l.isPrevDrained;if(d&&t.length<=0||a)return Object(m.b)("div",{className:"Comments-empty",children:Object(m.c)(T.k,{children:[Object(m.b)(T.e,{}),Object(m.b)("div",{children:"还没有评论"})]})});var h={getContainer:function(e){return e}};return Object(m.c)(N.b,Object.assign(Object.assign({className:"CommentList",onRef:function(t){e.listEl=t},isLocal:!0,isLoading:u,isPrevDrained:p,isDrained:d,onLoad:function(t){return e.load(e.props,t,!s)},placeholder:Object(m.b)(N.a,{className:"CommentItem",small:!0})},h),{},{children:["normal"===r&&"open"===c?e.renderNormalComments(t):e.renderComments(t),!i&&e.renderCollapsedDivider(),!i&&e.renderCollapsedComments()]}))},e.renderCommentEdit=function(t){var n,o=e.props,a=o.parent,c=a.canComment,r=(c=void 0===c?{status:!0}:c).status,i=c.reason,s=a.author,l=(s=void 0===s?{isOrg:!1}:s).isOrg,u=a.type,d=a.id,p=a.adminClosedComment,h=a.questionType,f=a.commentStatus,b=a.question,C=a.brand,g=o.byComment,j=o.autoFocus,y=o.commentNeedsReview,R=o.showNotification,k=p?"当前内容暂时无法评论":i,N=j&&!g,w=f&&!1===f.canComment,I=null!==(n=Object(ye.a)(u,b,C))&&void 0!==n?n:"";return r&&!p?Object(m.c)("div",{className:"Comments-footer-wrapper",children:[Object(m.b)(Q,Object.assign({className:"Comments-".concat("top"===t?"top":"footer"),type:u,id:d,commentNeedsReview:y,commentStatus:f,onSubmit:e.addComment,autoFocus:N,ownerAuthorIsOrg:l,ownerAuthorIsBrand:"commercial"===h,brandCommentText:I},"top"===t&&{preset:"default",onClick:function(e){O.a.trackEvent(e.target,{id:3905})}})),w&&Object(m.b)("div",Object.assign({},Object(P.a)((function(){R(f.toast,"red",z.b)}),{className:"Comments-footer-disabled"})))]}):"top"!==t&&Object(m.b)("div",{className:v()("Comments-disabledText",{"Comments-disabledText--fixed":!1}),children:Object(m.b)("div",{className:"Comments-disabledReason",children:k})})},e.renderBottomButton=function(){var t=e.props.params,n=t.id,o=t.answerId,a=Boolean(o);return Object(m.b)("div",{className:"Comments-footer CommentEditor--normal",children:Object(m.b)(I.c,{className:"CommentEditor-startCommentButton",preset:"primary",color:"blue",onClick:function(){return Object(k.e)(Object(E.a)(a?{type:"answer",id:o}:{type:"question",id:n},{utm_content:"comment_area"}),{zaProps:{id:3906}})},children:"打开 App 参与站内讨论"})})},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.byComment,n=e.commentPattern,o=e.parent.adminClosedComment,a=this.state.current;t&&this.scrollToTarget(),"bottom"!==n||o||this.loadByPagination(a)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.order,o=t.status,a=t.targetComment,c=t.commentPattern;n===e.order&&o===e.status||("bottom"===c?(this.setState({current:1}),this.loadByPagination(1,e)):this.load(e),this.setState({collapsed:!0}));var r=e.targetComment;!a&&r&&this.setState({collapsed:!r.collapsed})}},{key:"componentDidUpdate",value:function(e){!e.comments.length&&this.props.comments.length&&this.props.byComment&&this.scrollToTarget()}},{key:"componentWillUnmount",value:function(){this.props.dispatch(Object(z.e)(z.b))}},{key:"scrollToTarget",value:function(){var e=this.targetCommentEl,t=this.listEl;if(t&&e){var n=e.getBoundingClientRect(),o=n.top,a=n.height,c=t.getBoundingClientRect(),r=c.top,i=c.height;this.listEl.scrollTop+=o-r-(i-a)/2,e.classList.add("CommentItem--highlighted"),setTimeout((function(){return e.classList.remove("CommentItem--highlighted")}),2e3),e.tabIndex=-1,e.focus()}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.isAuthor,a=t.comments,c=t.commentPattern,r=t.commentInputPosition,i=t.parent,s=i.author,l=(s=void 0===s?{isOrg:!1}:s).isOrg,u=i.commentPermission,d=i.reviewingCounts,p=i.commentCount,h=i.adminClosedComment,f=t.totals,b=t.status,C=t.order,O=t.onStatusChange,g=t.onOrderChange,j=t.targetLink,y=a.filter((function(e){return!e.isDelete})),R="censor"===u&&o,k=R?{isCommentReviewer:R,onStatusChange:O,status:b,reviewingCounts:d}:{status:b},N=v()({Comments:!0,"Comments--withEditor":!0,"Comments-withPagination":"bottom"===c},n);return Object(m.c)("div",{className:N,ref:function(t){e.commentsElement=t},children:[Object(m.b)(ge.a,Object.assign({commentCount:void 0!==p?p:f,commentClosed:h,targetLink:j,order:C,onOrderChange:g,commentPattern:c,isOrg:l,options:this.renderCommentEdit("top")},k)),"top"===r&&this.renderCommentEdit(),"bottom"===c?this.renderPatternContent(y):this.renderModalContent(y),"bottom"===r&&this.renderCommentEdit()]})}}]),n}(h.Component);Ne.propTypes={type:d.a.string,parent:d.a.object.isRequired,targetLink:d.a.node,commentNeedsReview:d.a.bool,byComment:d.a.oneOfType([d.a.number,d.a.string]),commentPattern:d.a.string,commentInputPosition:d.a.oneOf(["top","bottom"]),showPackupButton:d.a.bool,handlePackupButton:d.a.func,onPaginationClick:d.a.func,autoFocus:d.a.bool},Ne.defaultProps={commentInputPosition:"bottom",showPackupButton:!0,autoFocus:!0};var we=Object(f.connect)((function(e,t){var n=t.parent,o=t.parent,a=o.type,c=o.id,r=t.status,i=t.order,s=t.byComment,l=t.commentPattern,m=e.entities,u=e.comments,d="".concat(a,"_").concat(c),p=u.parent,h=u.pagination;"reviewing"===r&&(h=u.reviewing),"reverse"===i&&"open"===r&&(h=u.reverse);var f=[],b=u.collapsed[d]||{};b.ids&&b.ids.length>0&&(f=b.ids.map((function(e){return m.comments[e]})));var v=h[d]||{isPrevDrained:!1,isFetching:!1,isDrained:!1,ids:[]},C=v.isFetching,O=v.isPrevDrained,g=v.isDrained,j=v.ids,y=v.newIds,R=void 0===y?[]:y;return{isFetching:C,isPrevDrained:O,isDrained:g,totals:v.totals,comments:("bottom"!==l?j:R).map((function(e){return m.comments[e]})),collapsedInfo:b,collapsedComments:f,targetComment:m.comments[s],parent:Object.assign(Object.assign({},n),p[d])}}),{showNotification:z.h})(Ne);function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(s.a)(this,n)}}var Se=function(e){Object(i.a)(n,e);var t=Ie(n);function n(e){var o;return Object(c.a)(this,n),(o=t.call(this,e)).load=o.load.bind(Object(M.a)(o)),o.addComment=e.authRequired(o.addComment.bind(Object(M.a)(o)),void 0,z.b),o}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){this.props.dispatch(Object(C.f)(this.props.commentId))}},{key:"addComment",value:function(e,t){var n=this.props,o=n.parent,a=o.type,c=o.id,r=n.commentId,i=n.dispatch,s=[a,c,e,t.id,r];return i(C.a.apply(void 0,s))}},{key:"render",value:function(){var e,t,n,o=this.props,a=o.onItemLike,c=o.onItemDelete,r=o.onItemFeature,i=o.onItemApprove,s=o.onItemCollapse,l=o.onItemDislike,u=o.onNavBack,d=o.canOperateItem,p=o.isFetching,h=o.comments,f=o.commentNeedsReview,b=o.openComment.collapsed,v=o.parent,C=o.parent.canComment,O=(C=void 0===C?{status:!0}:C).status,g=C.reason,j=o.commentPattern,y=o.commentId,R=o.currentUser;return Boolean(R&&h.find((function(e){return e.author&&e.author.member.urlToken===R.urlToken})))&&(t=(e=h.filter((function(e){return e.author&&e.author.member.urlToken!==R.urlToken})))[e.length-1]),p&&!h.length?n=Object(m.b)(N.a,{className:"CommentItem",small:!0}):h.length&&(n=h.map((function(e,t){return Object(m.b)(Ce,{isConversation:!0,commentNeedsReview:f,canOperate:d,parent:v,comment:e,onLike:a,onDelete:c,onFeature:r,onApprove:i,onCollapse:s,onDislike:l,collapsedShown:b},t)}))),"bottom"===j?Object(m.b)(q.b,{size:"fullPage",onClose:u,children:Object(m.c)("div",{className:"Comments",children:[Object(m.b)(ge.a,{isConversation:!0,commentPattern:j}),Object(m.b)("div",{className:"CommentList",children:n})]})}):Object(m.c)("div",{className:"Comments",children:[Object(m.b)(ge.a,{isConversation:!0,onNavBack:u}),Object(m.b)("div",{className:"CommentList",children:n}),t&&(O?Object(m.b)(Q,{id:y,type:"conversation",className:"Comments-footer",replyTo:t,commentNeedsReview:f,onSubmit:this.addComment}):Object(m.b)("div",{className:"Comments-disabledText",children:g}))]})}}]),n}(h.Component);Se.propTypes={commentId:d.a.number.isRequired,type:d.a.string,parent:d.a.object.isRequired,commentNeedsReview:d.a.bool};var Ee=Object(p.compose)(G.a,Object(f.connect)((function(e,t){var n=t.commentId,o=e.entities.comments,a=e.comments.conversation[n]||{isFetching:!1,isDrained:!1,ids:[]};return{isFetching:a.isFetching,isDrained:a.isDrained,comments:a.ids.map((function(e){return o[e]})),openComment:o[n]}})))(Se),Pe=n(439),ze=n(224),Be=["className","containerClassName","parent","commentPattern","type","parent","needLoadCommentPermission","currentUser"];function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(s.a)(this,n)}}var Te=function(e){Object(i.a)(n,e);var t=Ae(n);function n(e){var o;Object(c.a)(this,n),(o=t.call(this,e)).state={openedCommentId:null,status:"open",order:"normal"},o.like=function(e,t){var n=o.props,a=n.onItemLike,c=n.dispatch;a&&a(e,t),c(Object(C.j)(e))},o.collapse=function(e){var t=o.props,n=t.dispatch,a=t.parent;n(Object(C.g)(e,a.type,a.id))},o.dislike=function(e){return o.props.dispatch(Object(C.h)(e))},o.approve=function(e){var t=o.props,n=t.dispatch,a=t.parent,c=t.type;n(Object(C.b)(e,a.type||c,a.id))},o.handleStatusChange=function(e){o.setState({status:e})},o.handleOrderChange=function(e,t){o.props.onOrderChange&&o.props.onOrderChange(e,t),o.setState({order:e})};var a=e.parent,r=e.dispatch;return o.feature=function(e,t){return r(Object(C.i)(e,a.id,a.type,t))},o.delete=function(e){return r(Object(C.d)(e,a.type,a.id))},o.showConversation=function(e){return o.setState({openedCommentId:e})},o.showComments=function(){return o.setState({openedCommentId:null})},o}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.onMount;e&&e(this.domNode)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.containerClassName,c=t.parent,r=t.commentPattern,i=t.type,s=t.parent,l=(s=void 0===s?{}:s).commentPermission,u=s.relationship,d=void 0===u?{}:u,p=s.author,h=void 0===p?{}:p,f=t.needLoadCommentPermission,b=t.currentUser,C=Object(a.default)(t,Be),O=void 0===d.isAuthor?b&&h.urlToken&&b.urlToken===h.urlToken:d.isAuthor,g="censor"===l&&!O,j="answer"===i||"article"===i,y=this.state,R=y.openedCommentId,k=y.status,N=y.order,w={commentNeedsReview:g,parent:c,type:i,canOperateItem:j,onShowConversation:this.showConversation,onItemLike:this.like,onItemFeature:this.feature,onItemDelete:this.delete,onItemCollapse:this.collapse,onItemDislike:this.dislike,onItemApprove:this.approve};return Object(m.c)("div",{className:v()("Comments-container",o),ref:function(t){return e.domNode=t},children:[Object(m.b)(we,Object.assign(Object.assign(Object.assign({},C),w),{},{commentPattern:r,className:v()(n,{"Comments--hidden":R&&"bottom"!==r}),order:N,status:k,onStatusChange:this.handleStatusChange,onOrderChange:this.handleOrderChange,needLoadCommentPermission:f,isAuthor:O})),R&&Object(m.b)(Ee,Object.assign(Object.assign(Object.assign({},C),w),{},{commentPattern:r,commentId:R,onNavBack:this.showComments}))]})}}]),n}(h.Component);Te.propTypes={type:d.a.string.isRequired,parent:d.a.object.isRequired,onOrderChange:d.a.func,onItemLike:d.a.func,isAuthor:d.a.bool,onMount:d.a.func},Te.defaultProps={type:"answer"};t.default=Object(p.compose)(ze.a,Object(f.connect)(),Object(Pe.a)(null))(Te)},906:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),a=n.n(o),c=n(52),r=Object.assign;var i=function(e){return a.a.createElement(c.a,r({width:"150",height:"120",viewBox:"0 0 150 120"},e),a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("path",{fill:"#EBEEF5",d:"M44 31.005v55.99A3.003 3.003 0 0047.003 90h53.994A3.005 3.005 0 00104 86.995v-55.99A3.003 3.003 0 00100.997 28H47.003A3.005 3.005 0 0044 31.005zm-3 0A6.005 6.005 0 0147.003 25h53.994A6.003 6.003 0 01107 31.005v55.99A6.005 6.005 0 01100.997 93H47.003A6.003 6.003 0 0141 86.995v-55.99z",fillRule:"nonzero"}),a.a.createElement("path",{fill:"#F7F8FA",d:"M59 50a6 6 0 110-12 6 6 0 010 12zm12-9.5c0-.828.68-1.5 1.496-1.5h9.008c.826 0 1.496.666 1.496 1.5 0 .828-.68 1.5-1.496 1.5h-9.008A1.495 1.495 0 0171 40.5zm0 7c0-.828.667-1.5 1.5-1.5h21c.828 0 1.5.666 1.5 1.5 0 .828-.667 1.5-1.5 1.5h-21c-.828 0-1.5-.666-1.5-1.5zM59 73a6 6 0 110-12 6 6 0 010 12zm12-9.5c0-.828.68-1.5 1.496-1.5h9.008c.826 0 1.496.666 1.496 1.5 0 .828-.68 1.5-1.496 1.5h-9.008A1.495 1.495 0 0171 63.5zm0 7c0-.828.667-1.5 1.5-1.5h21c.828 0 1.5.666 1.5 1.5 0 .828-.667 1.5-1.5 1.5h-21c-.828 0-1.5-.666-1.5-1.5z"})))}},913:function(e,t,n){"use strict";n.d(t,"k",(function(){return i})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return C})),n.d(t,"e",(function(){return g})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return k})),n.d(t,"g",(function(){return w})),n.d(t,"j",(function(){return E})),n.d(t,"f",(function(){return I.a}));var o=n(32),a=n(1),c=n(57),r=["children"],i=function(e){var t=e.children,n=Object(o.default)(e,r);return Object(a.b)(c.Flex,Object.assign(Object.assign({alignItems:"center",justifyContent:"center",flex:1,height:"100%"},n),{},{children:Object(a.b)(c.Text,{textAlign:"center",color:"GBL05A",children:t})}))},s=n(0),l=n.n(s),m=n(52),u=Object.assign;var d=function(e){return l.a.createElement(m.a,u({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M94 29v-2.002c0-.55.443-.998 1-.998h1c.553 0 1 .446 1 .998V29h2.002c.55 0 .998.443.998 1v1c0 .553-.446 1-.998 1H97v2.002c0 .55-.443.998-1 .998h-1c-.553 0-1-.446-1-.998V32h-2.002A.997.997 0 0191 31v-1c0-.553.446-1 .998-1H94zm30.613 17.724l-21.82-4.638.207-3.023 22.237 4.727a6.004 6.004 0 014.62 7.122l-7.9 37.158a6.001 6.001 0 01-7.116 4.627l-15.31-3.254.63-2.934 15.31 3.25c1.62.34 3.218-.69 3.56-2.32l7.9-37.16a3.005 3.005 0 00-2.31-3.567zM48.596 85.727l.624 2.935-12.717 2.703a6.004 6.004 0 01-7.117-4.628L21.488 49.58a6.004 6.004 0 014.62-7.123L47 38.017l.133 3.038-20.402 4.337a3 3 0 00-2.3 3.564l7.9 37.157a3.005 3.005 0 003.56 2.317l12.71-2.703zM100 82c0 3.314-2.688 6-6.006 6H56.006A6.01 6.01 0 0150 82V34c0-3.314 2.688-6 6.006-6h27.147v3H56.006A3.003 3.003 0 0053 34v48c0 1.65 1.35 3 3.006 3h37.988A3.003 3.003 0 0097 82V42.373h3V82zm-4.5-41C89.7 41 85 36.3 85 30.5S89.7 20 95.5 20 106 24.7 106 30.5 101.3 41 95.5 41zm0-3a7.5 7.5 0 100-15 7.5 7.5 0 000 15z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M47 73.22l-6.484 1.378c-.82.174-1.333.97-1.16 1.78.173.816.97 1.327 1.784 1.154L47 76.287V73.22zm0-8.594l-4.58.974c-.8.17-1.324.968-1.152 1.778a1.494 1.494 0 001.775 1.156l3.957-.84v-3.068zm0-17.285a6.002 6.002 0 00-8 5.66 6.002 6.002 0 008 5.66V47.34zm56 29.88l6.178 1.318a1.5 1.5 0 10.624-2.934L103 74.148v3.067zm0-8.58l4.275.91c.808.17 1.6-.34 1.775-1.157a1.507 1.507 0 00-1.15-1.78l-4.9-1.04v3.067zm0-8.97c.626.22 1.3.34 2 .34 3.314 0 6-2.685 6-6s-2.686-6-6-6c-.7 0-1.374.12-2 .34v11.32zM76 56a8 8 0 110-16 8 8 0 010 16zm-8 7.5c0-.828.667-1.5 1.505-1.5h12.99a1.5 1.5 0 110 3h-12.99A1.5 1.5 0 0168 63.5zm-5 8c0-.828.67-1.5 1.49-1.5h23.02c.822 0 1.49.666 1.49 1.5 0 .828-.67 1.5-1.49 1.5H64.49c-.822 0-1.49-.666-1.49-1.5z"})))},p=Object.assign;var h=function(e){return l.a.createElement(m.a,p({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M67.757 83H45c-1.66 0-3-1.338-3-2.998V37.998A3.003 3.003 0 0145 35h53.42v-3H45c-3.31 0-6 2.686-6 5.998v42.004A5.994 5.994 0 0045 86h21.515l6.853 6.854a2.99 2.99 0 004.234 0L84.456 86H105c3.31 0 6-2.686 6-5.998v-36.54h-3v36.54A3.003 3.003 0 01105 83H83.214l-7.728 7.728L67.756 83z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M55 48.5c0-.828.67-1.5 1.508-1.5h26.984a1.5 1.5 0 110 3H56.508A1.5 1.5 0 0155 48.5zm0 11c0-.828.677-1.5 1.495-1.5h37.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-37.01A1.494 1.494 0 0155 59.5zm0 11c0-.828.677-1.5 1.495-1.5h37.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-37.01A1.494 1.494 0 0155 70.5z"}),l.a.createElement("path",{fill:"#EBEEF5",d:"M94.868 50.46l18.92-18.92-2.83-2.827-18.918 18.92-2.12-2.123 18.917-18.918a3.005 3.005 0 014.245-.002l2.828 2.828a3.004 3.004 0 01-.002 4.245L96.99 52.58l-2.122-2.12zm-7.193 2.377l2.244-7.327 7.07 7.07-7.328 2.245c-1.575.482-2.473-.405-1.988-1.988z",fillRule:"nonzero"})))},f=Object.assign;var b=function(e){return l.a.createElement(m.a,f({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.316 2.79A1.99 1.99 0 0144 93V30.997C44 27.687 46.68 25 50.002 25h48.996A5.996 5.996 0 01105 30.998v62c0 .45-.147.866-.396 1.2l-4.112-2.658z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M55 39c0-.553.44-1 1-1h19c.553 0 1 .44 1 1v19c0 .553-.44 1-1 1H56c-.553 0-1-.44-1-1V39zm25 .5c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.5 1.5 0 110 3h-35.99A1.5 1.5 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.5 1.5 0 110 3h-24.99A1.5 1.5 0 0155 75.5z"})))},v=Object.assign;var C=function(e){return l.a.createElement(m.a,v({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M37.273 69.98c.212-3.3 3.063-5.98 6.387-5.98h63.91c3.315 0 6.175 2.673 6.387 5.98l1.285 20.04c.212 3.302-2.302 5.98-5.615 5.98H41.603c-3.313 0-5.827-2.673-5.615-5.98l1.285-20.04zm1.71 20.23C38.88 91.788 40.02 93 41.603 93h68.023c1.58 0 2.722-1.215 2.62-2.79l-1.284-20.037c-.11-1.726-1.657-3.173-3.394-3.173H43.66c-1.74 0-3.282 1.447-3.393 3.173L38.982 90.21zM47 58h58v-3.5a1.5 1.5 0 013 0v5c0 .414-.168.79-.44 1.06a1.49 1.49 0 01-1.06.44h-61a1.49 1.49 0 01-1.06-.44A1.49 1.49 0 0144 59.5v-5a1.5 1.5 0 013 0V58zm50-31H55v28.008h-3V25.992c0-1.1 1.025-1.992 2.283-1.992h43.434c1.26 0 2.283.898 2.283 1.992v29.016h-3V27zM60 87.5c0-.828.668-1.5 1.5-1.5h29c.828 0 1.5.666 1.5 1.5 0 .828-.668 1.5-1.5 1.5h-29c-.828 0-1.5-.666-1.5-1.5zM46 72.01c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm-52 7c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M71 34.5a1.5 1.5 0 011.497-1.5h7.006a1.5 1.5 0 110 3h-7.006A1.495 1.495 0 0171 34.5zm-9 8c0-.828.665-1.5 1.505-1.5h24.99a1.5 1.5 0 110 3h-24.99A1.5 1.5 0 0162 42.5zm0 7c0-.828.67-1.5 1.495-1.5h19.01c.826 0 1.495.666 1.495 1.5 0 .828-.67 1.5-1.495 1.5h-19.01A1.494 1.494 0 0162 49.5z"})))},O=Object.assign;var g=function(e){return l.a.createElement(m.a,O({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M106.807 78h8.19A3.004 3.004 0 00118 74.998V34.002A3 3 0 00114.997 31H61.003A3.004 3.004 0 0058 34.002V36h-3v-1.998A6.004 6.004 0 0161.003 28h53.994A6 6 0 01121 34.002v40.996A6.004 6.004 0 01114.997 81h-5.372l-.375 6.004c-.138 2.207-1.514 2.732-3.074 1.172L99 81h-5v-3h6.243l6.178 6.178.388-6.178zM44.824 95.176c-1.56 1.56-2.936 1.035-3.074-1.172L41.312 87H37a6 6 0 01-6-6.006V45.006A6.01 6.01 0 0137 39h48a6 6 0 016 6.006v35.988A6.01 6.01 0 0185 87H53l-8.176 8.176zm-.245-3.998L51.755 84H85c1.65 0 3-1.35 3-3.006V45.006A3 3 0 0085 42H37c-1.65 0-3 1.35-3 3.006v35.988A3 3 0 0037 84h7.13l.45 7.178z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M94 49h9.494a1.5 1.5 0 110 3H94v-3zm0 9h9.494a1.5 1.5 0 110 3H94v-3zm-50 6.5c0-.828.68-1.5 1.505-1.5h30.99a1.5 1.5 0 110 3h-30.99A1.5 1.5 0 0144 64.5zm0-14.503c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM44 73.5c0-.828.68-1.5 1.505-1.5h30.99a1.5 1.5 0 110 3h-30.99A1.5 1.5 0 0144 73.5z"})))},j=Object.assign;var y=function(e){return l.a.createElement(m.a,j({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("path",{fill:"#EBEEF5",d:"M62.85 82.335c-.13-.03-.202-.04-.25-.044-.117 0-.31.05-.87.34-7.092 2.65-7.508 2.79-9.903 3.43-.955.26-1.885.46-2.826.63-1.24.23-2.52-.08-3.35-.83-1.12-1.01-1.16-2.58-.02-3.73l.28-.22s.074-.053.204-.19c.265-.26.54-.63.81-1.102.588-1.05 1.025-2.445 1.224-4.246.145-.8-.374-2.14-1.117-2.833-.23-.216-.696-.727-1.487-1.683-3.62-4.37-6.03-12.332-6.03-18.87C39.5 37.19 53.48 23.5 72.446 23.5c19.842 0 32.947 13.235 32.947 29.466 0 21.157-22.76 36.133-42.028 29.488-.182-.04-.473-.11-.515-.12zm-.068-3.038c.233.014.448.05.717.108l.6.14c17.56 6.102 38.29-7.514 38.29-26.58 0-14.58-11.77-26.465-29.95-26.465-17.32 0-29.95 12.36-29.95 26.466 0 5.885 2.203 13.176 5.333 16.96.716.865 1.102 1.287 1.222 1.4 1.432 1.34 2.34 3.65 2.044 5.404-.246 2.172-.8 3.94-1.585 5.338a8.3 8.3 0 01-1.213 1.68c1.02-.175 1.87-.366 2.75-.598 2.25-.596 2.667-.743 9.4-3.245.95-.47 1.596-.653 2.326-.608zm11.554 9.593a1.5 1.5 0 111.919-2.306c5.242 4.364 12.82 5.41 19.8 2.98l.173-.05c.084-.017.372-.085.433-.1.22-.046.39-.074.59-.086.61-.037 1.14.11 1.87.472 4.83 1.793 5.13 1.9 6.73 2.324.57.15 1.12.276 1.68.38-.22-.318-.46-.7-.68-1.153-.58-1.14-.99-2.51-1.173-4.12-.232-1.39.38-2.75 1.537-3.83.12-.11.43-.44.947-1.05 2.1-2.47 3.356-7.15 3.356-11.61 0-4.7-.62-7.39-2.7-10.094a1.5 1.5 0 012.381-1.828c2.56 3.33 3.318 6.62 3.318 11.925 0 5.11-1.433 10.45-4.066 13.555-.59.693-.98 1.107-1.19 1.304-.49.46-.675.873-.623 1.16.16 1.37.47 2.41.894 3.25.324.647.62 1.013.756 1.13 1.162 1.17.883 2.636-.177 3.54-.78.67-1.91 1-2.948.817-.69-.124-1.373-.28-2.073-.46-1.75-.466-2.05-.57-7.08-2.44l-.156-.068c-.344-.173-.42-.195-.414-.195-.142.03-.33.075-.464.105-7.91 2.728-16.56 1.52-22.627-3.533z"}))},R=Object.assign;var k=function(e){return l.a.createElement(m.a,R({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("path",{fill:"#EBEEF5",d:"M46.76 78.71a1.895 1.895 0 00-1.378 2.092c.13.948.94 1.648 1.904 1.635h55.468a1.882 1.882 0 001.884-1.635c.13-.95-.46-1.846-1.367-2.09a8.61 8.61 0 01-6.4-7.872l-2.473-20.928c-.96-7.872-6.567-14.37-14.178-16.435l-.986-.267-.113-1.014c-.24-2.106-2.01-3.696-4.11-3.696s-3.87 1.59-4.104 3.696l-.114 1.014-.98.267c-7.61 2.063-13.22 8.563-14.18 16.43L53.15 70.84c-.2 3.74-2.79 6.926-6.393 7.87zm50.61-29.155l2.482 20.982c.127 2.562 1.817 4.654 4.19 5.276a4.895 4.895 0 013.568 5.397c-.336 2.446-2.434 4.26-4.876 4.227H47.306a4.883 4.883 0 01-4.896-4.227 4.897 4.897 0 013.58-5.4 5.614 5.614 0 004.17-5.168l2.49-21.093c1.068-8.77 7.135-16.06 15.46-18.7.807-3.11 3.615-5.35 6.9-5.35s6.094 2.24 6.9 5.35c8.325 2.64 14.393 9.93 15.46 18.7zm-16.417 38.91c-.288 3.184-3.007 5.36-5.943 5.36-2.936 0-5.655-2.176-5.943-5.36l-2.988.27c.43 4.82 4.52 8.09 8.93 8.09s8.49-3.27 8.93-8.09l-2.99-.27z"}))},N=Object.assign;var w=function(e){return l.a.createElement(m.a,N({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("path",{fill:"#E7EAF1",d:"M39.09 35.994c.05-3.31 2.777-5.994 6.096-5.994h18.562c2.21 0 4.667 1.66 5.487 3.708L70.152 36h34.85A5.997 5.997 0 01111 41.99v40.02c0 3.308-2.69 5.99-6 5.99H45c-3.314 0-6-2.686-6-5.99V41.99c0-.077 0-.153.004-.23l.086-5.766zm2.914 5.81L42 41.99v40.02A2.998 2.998 0 0045 85h60c1.655 0 3-1.342 3-2.99V41.99a2.998 2.998 0 00-3-2.99H68.12l-1.67-4.177C66.085 33.915 64.73 33 63.747 33h-18.56c-1.68 0-3.07 1.368-3.097 3.038l-.086 5.767zM69.89 72.658c-1.56.715-3.105-.395-2.906-2.113l.697-6.032-4.11-4.47c-1.16-1.265-.58-3.076 1.115-3.418l5.952-1.2 2.982-5.29c.843-1.498 2.744-1.507 3.593 0l2.98 5.29 5.955 1.2c1.684.34 2.28 2.145 1.11 3.418l-4.11 4.47.698 6.032c.197 1.708-1.336 2.832-2.908 2.113l-5.52-2.527-5.523 2.53z"}))},I=n(906),S=Object.assign;var E=function(e){return l.a.createElement(m.a,S({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M109.545 78h5.463A2.995 2.995 0 00118 75.01V34.99c0-1.648-1.34-2.99-2.992-2.99H62.992A2.995 2.995 0 0060 34.99v2.027h-3V34.99c0-3.308 2.69-5.99 5.992-5.99h52.016A5.993 5.993 0 01121 34.99v40.02c0 3.308-2.69 5.99-5.992 5.99h-2.744l-.558 5.65c-.217 2.197-1.783 2.842-3.49 1.45l-8.7-7.1h-18.69v-3h19.76l8.29 6.767.67-6.767zM37.33 91.9c-1.942 1.057-3.23.15-2.878-2.027l1.237-7.64A25.886 25.886 0 0130 66c0-14.36 11.637-26 26-26 14.36 0 26 11.637 26 26 0 14.36-11.637 26-26 26-4.627 0-8.973-1.21-12.737-3.327L37.33 91.9zm5.958-6.656l1.447.814A22.878 22.878 0 0056 89c12.705 0 23-10.296 23-23 0-12.705-10.296-23-23-23-12.705 0-23 10.296-23 23a22.894 22.894 0 005.03 14.36l.833 1.04-1.11 6.855 5.535-3.01zm13.108-31.452c2.304 0 4.176.612 5.616 1.908 1.44 1.26 2.16 2.988 2.16 5.148 0 1.764-.468 3.24-1.368 4.392-.324.396-1.332 1.332-3.024 2.808-.684.576-1.188 1.224-1.512 1.872-.396.72-.576 1.512-.576 2.376v.612H53.84v-.612c0-1.332.216-2.484.72-3.42.468-1.008 1.836-2.484 4.068-4.464l.612-.684c.648-.828 1.008-1.692 1.008-2.628 0-1.26-.36-2.232-1.044-2.952-.72-.72-1.764-1.08-3.06-1.08-1.62 0-2.808.504-3.528 1.548-.648.864-.972 2.088-.972 3.672h-3.78c0-2.628.756-4.68 2.268-6.192 1.512-1.548 3.6-2.304 6.264-2.304zm-.648 21.06c.756 0 1.404.216 1.908.72.504.468.756 1.08.756 1.836s-.288 1.368-.792 1.872a2.703 2.703 0 01-1.872.72c-.72 0-1.368-.252-1.872-.756s-.756-1.116-.756-1.836c0-.756.252-1.368.756-1.836.504-.504 1.152-.72 1.872-.72z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M83.23 56h24.275c.818 0 1.495-.672 1.495-1.5 0-.834-.67-1.5-1.495-1.5H81.93a28.845 28.845 0 013.002 11h12.56a1.5 1.5 0 110 3h-12.51a29.422 29.422 0 00-.05-3zM72.285 42h35.22c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5H76a28.945 28.945 0 00-3.715-3z"})))}}}]);
//# sourceMappingURL=main.comments-modals.d86df7c235e449a7ae10.js.map